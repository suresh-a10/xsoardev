contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: 6.0.0
    itemVersion: 1.4.12
    packID: ""
    packName: ""
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
description: "Create Jira issue allows you to open new issues.\nWhen creating the
  issue, you can decide to update based on on the issue's state, which will wait for
  the issue to resolve or close with StatePolling.\nAlternatively, you can select
  to mirror the Jira issue and incident fields.  To apply either of these options,
  set the SyncTicket value in the playbook inputs to one of the following options:
  \n1. StatePolling\n2. Mirror\n3. Leave Blank to use none\n\nWhen creating Jira issues
  through XSOAR, using the mirroring function, make sure that you exclude those issues
  when fetching incidents. To exclude these issues, tag the relevant issues with a
  dedicated label and exclude that label from the JQL query (Labels!=)."
id: be6fd89f-e004-45e8-831c-4a9ab44a1fc2
inputs:
- description: Set the summary of the ticket.
  key: Summary
  playbookInputQuery: null
  required: true
  value:
    simple: Demo user group japac
- description: Set the description of the ticket.
  key: Description
  playbookInputQuery: null
  required: true
  value:
    simple: Created from XSOAR
- description: Jira Project Name
  key: ProjectName
  playbookInputQuery: null
  required: true
  value:
    simple: devdemisto
- description: TaskName
  key: IssueTypeName
  playbookInputQuery: null
  required: true
  value:
    simple: '[System] Incident'
- description: "Set the value of the desired sync method with Jira Issue. you can
    choose one of three options:\n1. StatePolling\n2. Mirror \n3. Blank for none \n\nGenericPolling
    polls for the state of the ticket and runs until the ticket state is either resolved
    or closed. \n\nMirror - You can use the Mirror option to perform a full sync with
    the Jira Ticket. The ticket data is synced automatically between Jira and Cortex
    xSOAR with the Jira mirror feature.\nIf this option is selected, FieldPolling
    is true by default. "
  key: SyncTicket
  playbookInputQuery: null
  required: false
  value:
    simple: Mirror
- description: |-
    Set interval time for the polling to run
    (In minutes)
  key: PollingInterval
  playbookInputQuery: null
  required: false
  value:
    simple: "1"
- description: |-
    Set the amount of time to poll the status of the ticket before declaring a timeout and resuming the playbook.
    (In minutes)
  key: PollingTimeout
  playbookInputQuery: null
  required: false
  value:
    simple: "20"
- description: "In this use case, Additional polling commands are relevant when using
    StatePolling, and there is more than one Jira instance. It will specify the polling
    command to use a specific instance to run on. \nIf so, please add \"Using\" to
    the value. \nThe playbook will then take the instance name as the instance to
    use. "
  key: AdditionalPollingCommandName
  playbookInputQuery: null
  required: false
  value: {}
- description: |
    Set the Jira Instance that will be used for mirroring/running polling commands.
  key: InstanceName
  playbookInputQuery: null
  required: false
  value:
    simple: jira-v2_instance_3
- description: "Set the mirror direction, should be one of the following: \n1. In\n2.
    Out\n3. Both"
  key: MirrorDirection
  playbookInputQuery: null
  required: false
  value:
    simple: Both
- description: "Set tags for mirror comments and files to Jira.\nAs defined in the
    instance settings, by default it will be comment for comments mirroring and attachment
    for attachments mirroring. "
  key: MirrorTags
  playbookInputQuery: null
  required: false
  value:
    simple: comment,attachment
- description: |-
    Set the value to true or false to determine if the playbook will execute the FieldPolling sub playbook.
    This is useful when a playbook needs to wait for the Jira ticket to be resolved before continuing the parent playbook.
    FieldPolling will run until the ticket state is either resolved or closed
  key: FieldPolling
  playbookInputQuery: null
  required: false
  value:
    simple: "true"
- description: |
    Add labels to the issue.
  key: IssueLabel
  playbookInputQuery: null
  required: false
  value: {}
name: Create Jira Issue_copy
outputs: []
sourceplaybookid: Create Jira Issue
starttaskid: "0"
tasks:
  "0":
    continueonerrortype: ""
    id: "0"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "16"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 17111124-2587-47d8-8742-d9bb3c953012
      iscommand: false
      name: ""
      version: -1
    taskid: 17111124-2587-47d8-8742-d9bb3c953012
    timertriggers: []
    type: start
    view: |-
      {
        "position": {
          "x": 50,
          "y": -430
        }
      }
  "3":
    continueonerrortype: ""
    id: "3"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "15"
    note: false
    quietmode: 0
    scriptarguments:
      description:
        complex:
          root: inputs.Description
      issueTypeName:
        complex:
          root: inputs.IssueTypeName
      labels:
        complex:
          root: 'inputs.IssueLabel '
      projectName:
        simple: ${inputs.ProjectName}
      summary:
        complex:
          root: inputs.Summary
      using:
        simple: ${inputs.InstanceName}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Creates a new issue in Jira.
      id: abd073e9-8658-48f5-85f2-c28beffd4329
      iscommand: true
      name: Create Jira issue
      script: '|||jira-create-issue'
      type: regular
      version: -1
    taskid: abd073e9-8658-48f5-85f2-c28beffd4329
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 750,
          "y": 40
        }
      }
  "8":
    continueonerrortype: ""
    id: "8"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: fb6f1430-ceb4-4415-82a5-c6cd69d1516b
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: fb6f1430-ceb4-4415-82a5-c6cd69d1516b
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1330
        }
      }
  "9":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.SyncTicket
          operator: isEqualString
          right:
            value:
              simple: Mirror
      label: Mirror
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.SyncTicket
          operator: isEqualString
          right:
            value:
              simple: StatePolling
      label: State Polling
    continueonerrortype: ""
    id: "9"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "17"
      Mirror:
      - "13"
      State Polling:
      - "14"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Check for a playbook input to indicate which sync mode was selected.
      id: 92c11b6e-92a1-4922-8c63-582e4e112109
      iscommand: false
      name: Mirror or State Polling?
      type: condition
      version: -1
    taskid: 92c11b6e-92a1-4922-8c63-582e4e112109
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 750,
          "y": 585
        }
      }
  "13":
    continueonerrortype: ""
    id: "13"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    loop:
      exitCondition: ""
      iscommand: false
      max: 100
      wait: 1
    nexttasks:
      '#none#':
      - "17"
    note: false
    quietmode: 0
    scriptarguments:
      'FieldPolling ':
        complex:
          root: inputs.FieldPolling
      FieldPollingInterval:
        complex:
          root: inputs.PollingInterval
      FieldPollingTimeout:
        complex:
          root: inputs.PollingTimeout
      MirrorDirection:
        complex:
          root: inputs.MirrorDirection
      MirrorInstanceName:
        complex:
          root: inputs.InstanceName
      MirrorTags:
        complex:
          root: inputs.MirrorTags
      TicketId:
        complex:
          accessor: Id
          root: Ticket
    separatecontext: true
    skipunavailable: false
    task:
      brand: ""
      description: Mirror Jira Ticket is designed to serve as a sub-playbook, which
        enables ticket mirroring with Jira.
      id: 073e3f68-0e4a-4395-8279-17cda5b1a24a
      iscommand: false
      name: Mirror Jira Ticket
      playbookId: Mirror Jira Ticket
      type: playbook
      version: -1
    taskid: 073e3f68-0e4a-4395-8279-17cda5b1a24a
    timertriggers: []
    type: playbook
    view: |-
      {
        "position": {
          "x": 290,
          "y": 770
        }
      }
  "14":
    continueonerrortype: ""
    id: "14"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    loop:
      exitCondition: ""
      iscommand: false
      max: 100
      wait: 1
    nexttasks:
      '#none#':
      - "17"
    note: false
    quietmode: 0
    scriptarguments:
      AdditionalPollingCommandName:
        complex:
          root: inputs.AdditionalPollingCommandName
      InstanceName:
        complex:
          root: inputs.InstanceName
      Interval:
        complex:
          root: inputs.PollingInterval
      TicketId:
        complex:
          accessor: Id
          root: Ticket
      Timeout:
        complex:
          root: inputs.PollingTimeout
    separatecontext: true
    skipunavailable: false
    task:
      brand: ""
      description: |-
        Use Jira Incident State Polling as a sub-playbook when required to pause the execution of a master playbook until the Jira ticket state is either resolved or closed.
        This playbook implements polling by continuously running the jira-get-issue command until the state is either resolved or closed.
      id: 91d8e5e0-f711-4b6a-8d3a-be2301954060
      iscommand: false
      name: Jira Ticket State Polling
      playbookId: Jira Ticket State Polling
      type: playbook
      version: -1
    taskid: 91d8e5e0-f711-4b6a-8d3a-be2301954060
    timertriggers: []
    type: playbook
    view: |-
      {
        "position": {
          "x": 1190,
          "y": 770
        }
      }
  "15":
    continueonerrortype: ""
    fieldMapping:
    - incidentfield: Jira Status
      output:
        complex:
          accessor: Status
          root: Ticket
    - incidentfield: Jira Summary
      output:
        complex:
          accessor: Summary
          root: Ticket
    - incidentfield: Jira Reporter Name
      output:
        complex:
          accessor: Creator
          root: Ticket
          transformers:
          - args:
              delimiter:
                value:
                  simple: (
            operator: split
          - args:
              index:
                value:
                  simple: "0"
            operator: atIndex
    - incidentfield: Jira Reporter Email
      output:
        complex:
          accessor: Creator
          root: Ticket
          transformers:
          - args:
              delimiter:
                value:
                  simple: (
            operator: split
          - args:
              index:
                value:
                  simple: "1"
            operator: atIndex
          - args:
              limit: {}
              replaceWith: {}
              toReplace:
                value:
                  simple: )
            operator: replace
    - incidentfield: Jira ID
      output:
        complex:
          accessor: Id
          root: Ticket
    - incidentfield: Jira Issue Key
      output:
        complex:
          accessor: Key
          root: Ticket
    id: "15"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "9"
    note: false
    quietmode: 0
    scriptarguments:
      issueId:
        complex:
          accessor: Id
          root: Ticket
      using:
        simple: ${inputs.InstanceName}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Fetches an issue from Jira.
      id: 3688fc70-ccdc-408d-8c47-cf53d13d13c8
      iscommand: true
      name: Initial Update Incident with Jira Information
      script: '|||jira-get-issue'
      type: regular
      version: -1
    taskid: 3688fc70-ccdc-408d-8c47-cf53d13d13c8
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 750,
          "y": 320
        }
      }
  "16":
    continueonerrortype: ""
    id: "16"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "17"
      "yes":
      - "3"
    note: false
    quietmode: 0
    scriptarguments:
      brandname:
        simple: jira-v2
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Returns 'yes' if integration brand is available. Otherwise returns
        'no'
      id: fb77b3d7-3441-42ac-83dc-9a0d476e4c36
      iscommand: false
      name: Is Jira integration enabled?
      script: IsIntegrationAvailable
      type: condition
      version: -1
    taskid: fb77b3d7-3441-42ac-83dc-9a0d476e4c36
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 50,
          "y": -220
        }
      }
  "17":
    continueonerrortype: ""
    id: "17"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "8"
    note: false
    quietmode: 0
    scriptarguments:
      id:
        simple: ${incident.id}
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: commands.local.cmd.close.inv
      id: 99e62724-a630-4444-81ad-7e55ebcf5324
      iscommand: true
      name: close investigation
      script: Builtin|||closeInvestigation
      type: regular
      version: -1
    taskid: 99e62724-a630-4444-81ad-7e55ebcf5324
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1100
        }
      }
version: -1
view: |-
  {
    "linkLabelsPosition": {
      "16_3_yes": 0.52,
      "9_14_State Polling": 0.52
    },
    "paper": {
      "dimensions": {
        "height": 1825,
        "width": 1520,
        "x": 50,
        "y": -430
      }
    }
  }
