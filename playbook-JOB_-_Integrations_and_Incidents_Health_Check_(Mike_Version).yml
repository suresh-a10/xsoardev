contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: 6.0.0
    itemVersion: 1.3.11
    packID: ""
    packName: Integrations & Incidents Health Check
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
description: You should run this playbook as a scheduled job.  The playbook checks
  the health of all enabled integrations and open incidents.
id: de540331-d97b-42c2-8f1e-9dc36e2541af
inputs:
- description: |-
    This input determines if the health check report should be sent automatically after running the playbook.
    True - Yes.
  key: SendHealthCheckReport
  playbookInputQuery: null
  required: false
  value: {}
- description: In case the 'SendHealthCheckReport' input equals to 'True', the email
    address the report will be sent to.
  key: EmailReportTo
  playbookInputQuery: null
  required: false
  value: {}
- description: Comma separated list of playbook names to exclude from restarting their
    failed tasks.
  key: playbookExclusion
  playbookInputQuery: null
  required: false
  value: {}
- description: Whether to automatically run the RestartFailedTasks automation.
  key: AutoRestartFailedTasks
  playbookInputQuery: null
  required: false
  value:
    simple: "False"
- description: "List of instances to ignore when setting the grid for the Failed Instances.
    \ \n\nThis can be used to ignore instances for which the test button doesn't work
    due to the integration itself. "
  key: failedInstancesExclusion
  playbookInputQuery: null
  required: false
  value:
    complex:
      accessor: FailedInstancesIgnore
      root: lists
name: JOB - Integrations and Incidents Health Check (Mike Version)
outputs: []
quiet: true
sourceplaybookid: JOB - Integrations and Playbooks Health Check
starttaskid: "0"
tasks:
  "0":
    continueonerrortype: ""
    id: "0"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "9"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: d206151f-7f26-4a9b-8976-8406bf9c68db
      iscommand: false
      name: ""
      version: -1
    taskid: d206151f-7f26-4a9b-8976-8406bf9c68db
    timertriggers: []
    type: start
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 50
        }
      }
  "9":
    continueonerrortype: ""
    id: "9"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "44"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: fa796992-8537-4f7b-8ca2-b15f4dee2454
      iscommand: false
      name: Run Health Check Scripts
      type: title
      version: -1
    taskid: fa796992-8537-4f7b-8ca2-b15f4dee2454
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 195
        }
      }
  "11":
    continueonerrortype: ""
    id: "11"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "12"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 9a6ad1ab-d815-4959-8502-83b42a8e676c
      iscommand: false
      name: Create Lists for Dashboard
      type: title
      version: -1
    taskid: 9a6ad1ab-d815-4959-8502-83b42a8e676c
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 515
        }
      }
  "12":
    continueonerrortype: ""
    id: "12"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    loop:
      exitCondition: ""
      iscommand: false
      max: 100
      wait: 1
    nexttasks:
      '#none#':
      - "20"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: This playbook is triggered by a 'JOB - Integrations and Incidents
        Health' playbook and is responsible for creating or updating related XSOAR
        lists.
      id: 68faf998-4b5d-4792-84a3-6ba02041c807
      iscommand: false
      name: JOB - Integrations and Incidents Health Check - Lists handling
      playbookId: JOB - Integrations and Playbooks Health Check - Lists handling
      type: playbook
      version: -1
    taskid: 68faf998-4b5d-4792-84a3-6ba02041c807
    timertriggers: []
    type: playbook
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 660
        }
      }
  "16":
    conditions:
    - condition:
      - - ignorecase: true
          left:
            iscontext: true
            value:
              complex:
                root: inputs.SendHealthCheckReport
          operator: isEqualString
          right:
            value:
              simple: "True"
      label: "yes"
    continueonerrortype: ""
    id: "16"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "21"
      "yes":
      - "18"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: |
        Checks the input to see if there is what to send the health check report ("SendHealthCheckReport") equal 'True'.
      id: 69449a42-3e1f-444a-8e2e-52a29c17e2f1
      iscommand: false
      name: Should send the health check report?
      type: condition
      version: -1
    taskid: 69449a42-3e1f-444a-8e2e-52a29c17e2f1
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 980
        }
      }
  "17":
    continueonerrortype: ""
    id: "17"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "19"
    note: false
    quietmode: 0
    scriptarguments:
      name:
        simple: Integrations and Incidents Health Check
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Generates a general health check report.
      id: 8a52bebe-ec6d-4cd3-8fb7-f78ac2e30b62
      iscommand: true
      name: Generate Health Check report
      script: Builtin|||generateGeneralReport
      type: regular
      version: -1
    taskid: 8a52bebe-ec6d-4cd3-8fb7-f78ac2e30b62
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 387.5,
          "y": 1330
        }
      }
  "18":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.EmailReportTo
          operator: isNotEmpty
      label: "yes"
    continueonerrortype: ""
    id: "18"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "21"
      "yes":
      - "17"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if there is an input of the email address to send the report
        to.
      id: d37cc00e-715d-4db6-8e1e-05fde504a6c0
      iscommand: false
      name: Is there an email address to send the report?
      type: condition
      version: -1
    taskid: d37cc00e-715d-4db6-8e1e-05fde504a6c0
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 275,
          "y": 1155
        }
      }
  "19":
    continueonerrortype: ""
    id: "19"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "21"
    note: false
    quietmode: 0
    scriptarguments:
      attachIDs:
        complex:
          accessor: EntryID
          root: InfoFile
      body:
        simple: Please find attached Integrations and Incidents Health Check report
          for enabled integrations and open incidents.
      subject:
        simple: Integrations and Incidents Health Check Report
      to:
        complex:
          root: inputs.EmailReportTo
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends the Health Check report.
      id: e4a1d79e-2c1f-4e6b-884c-6f2b997d9100
      iscommand: true
      name: Send Health Check report
      script: '|||send-mail'
      type: regular
      version: -1
    taskid: e4a1d79e-2c1f-4e6b-884c-6f2b997d9100
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 387.5,
          "y": 1505
        }
      }
  "20":
    continueonerrortype: ""
    id: "20"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "16"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 052a69c2-e988-4244-8139-390adaaefe8a
      iscommand: false
      name: Send Health Check Report
      type: title
      version: -1
    taskid: 052a69c2-e988-4244-8139-390adaaefe8a
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 835
        }
      }
  "21":
    continueonerrortype: ""
    id: "21"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "41"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 5cbd7e1a-3050-4568-83a6-682ac8d7e016
      iscommand: false
      name: Restart Failed Tasks
      type: title
      version: -1
    taskid: 5cbd7e1a-3050-4568-83a6-682ac8d7e016
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 1680
        }
      }
  "25":
    continueonerrortype: ""
    id: "25"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 1cc02f07-10eb-42a3-8a52-e00a9a8f27f6
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: 1cc02f07-10eb-42a3-8a52-e00a9a8f27f6
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 2495
        }
      }
  "38":
    continueonerrortype: ""
    id: "38"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "25"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: commands.local.cmd.close.inv
      id: 0f5e28f5-8d00-457a-89c9-4a8da862a0e5
      iscommand: true
      name: Close investigation
      script: Builtin|||closeInvestigation
      type: regular
      version: -1
    taskid: 0f5e28f5-8d00-457a-89c9-4a8da862a0e5
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 2320
        }
      }
  "40":
    continueonerrortype: ""
    id: "40"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "45"
    note: false
    quietmode: 0
    scriptarguments:
      playbook_exclusion:
        complex:
          root: inputs.playbookExclusion
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Use this Script to re-run failed tasks. Run in the same incident
        after running `GetFailedTasks` for restarting all of the failed tasks or some
        of them.
      id: ff92fd94-182f-4710-81d5-a60e45506cda
      iscommand: false
      name: Restart failed tasks
      script: RestartFailedTasks
      type: regular
      version: -1
    taskid: ff92fd94-182f-4710-81d5-a60e45506cda
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 50,
          "y": 2000
        }
      }
  "41":
    conditions:
    - condition:
      - - ignorecase: true
          left:
            iscontext: true
            value:
              complex:
                root: inputs.AutoRestartFailedTasks
          operator: isEqualString
          right:
            value:
              simple: "true"
      - - left:
            iscontext: true
            value:
              simple: GetFailedTasks
          operator: isNotEmpty
      label: "yes"
    continueonerrortype: ""
    id: "41"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "45"
      "yes":
      - "40"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Whether to restart the failed tasks identified automatically.
      id: 6004ecaa-801b-4ab9-8a68-44754c89fc5d
      iscommand: false
      name: Should restart failed tasks?
      type: condition
      version: -1
    taskid: 6004ecaa-801b-4ab9-8a68-44754c89fc5d
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 1825
        }
      }
  "44":
    continueonerrortype: ""
    id: "44"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    loop:
      exitCondition: ""
      iscommand: false
      max: 100
      wait: 1
    nexttasks:
      '#none#':
      - "11"
    note: false
    quietmode: 0
    scriptarguments:
      IgnoreFailedInstances:
        complex:
          root: inputs.failedInstancesExclusion
    separatecontext: true
    skipunavailable: false
    task:
      brand: ""
      description: This playbook is triggered by a 'JOB - Integrations and Playbooks
        Health' playbook and is responsible for running failed integrations and failed
        incidents scripts. The playbook may run separately from the main playbook
        to run health tests on enabled integrations and open incidents.
      id: 6dc38966-ddda-4c52-878f-14b6d8024570
      iscommand: false
      name: Integrations and Incidents Health Check - Running Scripts (Mike Version)
      playbookId: c5e79b1e-142e-4997-8fcb-da31d6ab14ca
      type: playbook
      version: -1
    taskid: 6dc38966-ddda-4c52-878f-14b6d8024570
    timertriggers: []
    type: playbook
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 340
        }
      }
  "45":
    continueonerrortype: ""
    id: "45"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "38"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 82658b37-1506-4b45-8c78-25572484af3e
      iscommand: false
      name: This is the End
      type: title
      version: -1
    taskid: 82658b37-1506-4b45-8c78-25572484af3e
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 162.5,
          "y": 2175
        }
      }
version: -1
view: |-
  {
    "linkLabelsPosition": {
      "16_18_yes": 0.43,
      "16_21_#default#": 0.16,
      "18_17_yes": 0.47,
      "18_21_#default#": 0.18,
      "41_40_yes": 0.36
    },
    "paper": {
      "dimensions": {
        "height": 2510,
        "width": 717.5,
        "x": 50,
        "y": 50
      }
    }
  }
