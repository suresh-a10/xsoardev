args:
- name: list
  required: true
commonfields:
  id: 6140c2f3-37c2-4a41-8fc5-d9a0906d18a5
  version: -1
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: ""
    itemVersion: ""
    packID: ""
    packName: ""
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
dockerimage: demisto/python3:3.7.3.286
enabled: true
engineinfo: {}
mainengineinfo: {}
name: CalculateTreshold_WIP
pswd: ""
runas: DBotWeakRole
runonce: false
script: |+
  l=demisto.args().get("list")
  p=json.loads(demisto.executeCommand('getList', {'listName':l})[0]['Contents'])
  r=[]
  values=list(p.values())

  for i in values[-4:-1]:
      i=i.get("data")
      demisto.results(i)
      r.append(int(i[0]))

  avg=sum(r)/3
  percentage=avg*0.025
  threshold=avg+percentage
  threshold=round(threshold)
  demisto.setContext('Threshold',threshold)
  demisto.results(threshold)

scripttarget: 0
subtype: python3
tags: []
type: python
