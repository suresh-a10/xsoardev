commonfields:
  id: 43db771b-b7ce-42ca-89e9-763d56313d4e
  version: -1
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: ""
    itemVersion: ""
    packID: ""
    packName: ""
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
dockerimage: demisto/python3:3.10.5.31928
enabled: true
engineinfo: {}
mainengineinfo: {}
name: SentinelTest_Aman_WIP
pswd: ""
runas: DBotWeakRole
runonce: false
script: |+
  import requests
  from requests.auth import HTTPBasicAuth,HTTPDigestAuth
  import ssl
  import json
  from pprint import pprint
  from requests import Session
  # print(ssl.OPENSSL_VERSION)



  '''

  Authentication API

  1.    URL - https://sentineluatcloud.ultimatix.net/NonUtxMod/rest/authenticate
  2.    Http Method – POST
  3.    Headers -
  Content-Type : application/json
  4.    Body -
  {
    "username":"admin",
    "password":"admin"
  }
  5.    Output -
  token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImV4cCI6MTY1OTYxNzIyMywiaWF0IjoxNjU5NjE3MTAzfQ.swVk-TqL-6iqAz1c0mTO20RJje4LcBW2Rbyt0CjFITZfbeU4xA9aKjQeqGbYrsDiudUZQxfyLEZur7COZRFWsA"

  InventoryDetails API

  1.    URL - https://sentineluatcloud.ultimatix.net/NonUtxMod/rest/senGetinventoryDetails
  2.    Http Method – POST
  3.    Headers -
  Content-Type : application/json
  Authorization : Bearer <paste-the-token-recieved-from-authenticate-API>
  4.    Body -
  {
    "ip":"",
    "hostName":"01VD0061723",
    "deviceOwnerId":""
  }


  '''
  '''

  url='https://sentineluatcloud.ultimatix.net/NonUtxMod/rest/authenticate'

  headers={
      'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36',
      'Content-type': 'application/json'}
  data={
      'username':'admin',
      'password':'admin'

  }

  response=requests.post(url, headers=headers, data=json.dumps(data), verify=False)

  print(response)


  '''

  # username='152585'
  # password='Pass@123'

  username='admin'
  password='admin'
  # url='https://sentineluatcloud.ultimatix.net'
  # url='https://10.61.68.158'
  # url='http://10.61.68.158'
  # url='http://10.61.54.124'
  # url='https://10.61.54.129'
  # url='https://10.17.193.98'
  # url='https://10.61.68.158:9990'
  # url='https://www.google.com'
  # url='https://10.61.68.158:8080'
  url='https://sentineluatcloud.ultimatix.net/NonUtxMod/rest/authenticate'
  # url='https://sentineluatcloud.ultimatix.net'
  # url='https://ultimatix.net/'
  # url='https://admin.zscalerthree.net/zsapi/v1/'
  # url='https://sentineluatcloud.ultimatix.net/NonUtxMod/rest/senGetinventoryDetails'
  # url='https://authsit.ultimatix.net/utxLogin/login'
  the_page_i_want = "https://sentineluatcloud.ultimatix.net/CompNotify/rest/senGetinventoryDetails"

  session = Session()
      # session = requests.Session()
  session.trust_env = False
  session.verify = False
  session.headers = {
      'User-Agent': 'curl/7.29.0',
      # 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36',
      'Content-Type': 'application/json'
  }
  #session.auth = HTTPBasicAuth(username, password)



  session.body={
      "username":"admin",
      "password":"admin"
  }

  # resp= session.post(url)
  resp = session.post(url,auth = HTTPBasicAuth(username, password))


  # session.headers = {
  #         # 'User-Agent': 'curl/7.29.0',
  #     'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36',
  #     'Content-Type': 'application/json',
  #     'Authorization':'Bearer 0163019eed886a51cea84cf6a330956648de24341b379b88ae10a20483a535a990355db9653fe2068a3087cec2049f5ad7cd62c3e9e1fbc8a3b9bafaa8274e053587c6273a'
  # }
  # session.body={
  #   "ip":"",
  #   "hostName":"01VD0061723",
  #   "deviceOwnerId":""
  # }

  # resp = session.get(url)





  #print(session.auth.text)
  # session.headers = {
  #         #'User-Agent': 'curl/7.29.0',
  #         'Authorization': 'Basic {}'.format('MTUyNTg1OlBhc3NAMTIz'),
  #         'WWW-Authenticate': 'Basic realm=weblogic',
  #         'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36',
  #         'Content-Type': 'application/json',
  #         'Cookie': 'session=value=',
  #         'Connection': 'keep-alive',
  #         'Accept-Encoding': 'gzip, deflate, sdch',
  #         'referer':'https://sentineluatcloud.ultimatix.net/CompNotify'
  #     }
  #resp = session.get(url)

  # headers = {
  #     'Content-type': 'application/json'

  # }
  # data = {
  #     'Content-Type' : 'application/json',
  #     'username':username,
  #     'password':password
  #     }

  # response=requests.post(url, headers, data, verify=False)
  print(resp.text)


  print(resp)
  print(resp.url)

  for response in resp.history:
      print(response.url)
  print(resp.text)
  print(resp.cookies)
  print(resp.headers)




  '''








  # with requests.Session() as session:
  #     # session = requests.Session()
  #     session.trust_env = False
  #     session.verify = False
  #     session.headers = {
  #         # 'User-Agent': 'curl/7.29.0',
  #         'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36',
  #         'Content-Type': 'application/json'
  #     }
  #     # session.auth = (username, password)
  #     # response= session.post(url, auth=(username, password))
  #     # response= session.post(url, allow_redirects=True)
  #     # print(response)
  #     # print(response.text)
  #     # print(response.code)
  #     # print(response.headers)

  #     body={
  #         'hostName':'ZSINUSAAODCHYDAB09'
  #     }
  #     # resp = session.post(url, allow_redirects=True)
  #     # print(auth)
  #     # # response = session.get(url + '/CompNotify/rest/senGetinventoryDetails')
  #     # # response = requests.get(url)
  #     # response = session.get(url+'/CompNotify/rest/senGetinventoryDetails')
  #     # print(response)

  #     # retrieve cookie value
  #     # resp = session.get(url)

  #     # csrf_token = resp.cookies['csrftoken']
  #     # # login, add referer
  #     resp = session.post(url,
  #                       data={
  #                           'form1': username,
  #                           'password-btn': password,
  #                           "submit": "Enter",
  #                             "lang": "en",
  #                             "action": "login",
  #                         #   'csrfmiddlewaretoken': csrf_token,
  #                           'next': the_page_i_want,
  #                       },
  #                       headers=dict(Referer=requrl))
  #     print(resp)
  #     # data=json.loads(resp)
  #     # print(resp.url)
  #     # for response in resp.history:
  #     #     print(response.url)
  #     print(resp.text)
  #     print(resp.cookies)
  '''
      # apireq=session.get(requrl+'/rest/senGetinventoryDetails')
      # print(apireq.text)

  # proxies={"https":"proxy.tcs.com"}
  # proxies={"https":None, "http":"proxy.tcs.com"}
  # proxies={"https":"https://proxy.tcs.com:8080", "http":"http://proxy.tcs.com:8080"}
  # session.proxies={"https":"https://proxy.tcs.com:8080", "http":"http://proxy.tcs.com:8080"}
  # proxies={"https":None, "http":None}
  # proxies={"https":None, "http":None}
  # # Making a http request
  # response = requests.post('',
              # auth = HTTPBasicAuth(username, password))

  # print request object
  # response = requests.get("https://cdctprcybeweb1.india.tcs.com")

scripttarget: 0
subtype: python3
tags: []
type: python
