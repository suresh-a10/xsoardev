commonfields:
  id: 48f1ec77-59de-41f9-88bc-06b0af368c13
  version: -1
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: ""
    itemVersion: ""
    packID: ""
    packName: ""
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
dockerimage: demisto/python3:3.10.6.33415
enabled: true
engineinfo: {}
mainengineinfo: {}
name: assignUserButton
pswd: ""
rolename:
- Administrator
runas: DBotWeakRole
runonce: false
script: |-
  #get the old value of the owner field
  owner = demisto.incidents()[0]['owner']

  #check if no owner assigned before
  if owner == "":
      #get the current user details
      res = demisto.executeCommand("getUsers", {"current": "true"})

      #get the username
      currentUser = res[0]['Contents'][0]['username']

      #assign the user to the current incident
      demisto.results(demisto.executeCommand("setIncident", {"owner": currentUser}))
      demisto.results("owner - " + currentUser + " Set")

      #start the response timer
      demisto.results(demisto.executeCommand("startTimer", {"timerField": "responsestarttime"}))

  else:
      demisto.results(demisto.context()['ss'])
scripttarget: 0
subtype: python3
tags: []
type: python
