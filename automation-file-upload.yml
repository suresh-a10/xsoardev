args:
- name: ScreenshotID
  required: true
commonfields:
  id: 307fea3d-1264-44c8-8319-dba128dd7d4b
  version: -1
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: ""
    itemVersion: ""
    packID: ""
    packName: ""
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
dockerimage: demisto/python3:3.9.7.24076
enabled: true
engineinfo: {}
mainengineinfo: {}
name: file-upload
pswd: ""
runas: DBotWeakRole
runonce: false
script: |-
  import requests
  api_url = "http://httpbin.org/post"
  res = demisto.executeCommand('getFilePath',{'id':demisto.args()["ScreenshotID"]})
  filePath = res[0]['Contents']['path']
  fileName = res[0]['Contents']['name']

  fraud_details = { 'fraud': 'one', 'notes': 'testing', 'shutdown': 'yes' }

  payload = ( ( 'fraudDetails', ( None, json.dumps(fraud_details) ) ), )
  payload += ( ( 'file', ( fileName, open(filePath, 'rb') ) ), )

  proxies = { "http": "http://httpbin.org/post",}

  response = requests.post(api_url, files=payload, proxies=proxies)
  print(response)
scripttarget: 0
subtype: python3
tags: []
type: python
