category: IT Services
commonfields:
  id: AWS - Lambda
  version: -1
configuration:
- display: AWS Default Region
  name: defaultRegion
  options:
  - us-east-1
  - us-east-2
  - us-west-1
  - us-west-2
  - ca-central-1
  - eu-west-1
  - eu-central-1
  - eu-west-2
  - ap-northeast-1
  - ap-northeast-2
  - ap-southeast-1
  - ap-southeast-2
  - ap-south-1
  - sa-east-1
  - eu-north-1
  - eu-west-3
  - us-gov-east-1
  - us-gov-west-1
  required: true
  type: 15
- display: Role Arn
  name: roleArn
  required: false
  type: 0
- display: Role Session Name
  name: roleSessionName
  required: false
  type: 0
- display: Role Session Duration
  name: sessionDuration
  required: false
  type: 0
- display: Access Key
  displaypassword: Secret Key
  name: credentials
  required: false
  type: 9
- display: Access Key
  hidden: true
  name: access_key
  required: false
  type: 0
- display: Secret Key
  hidden: true
  name: secret_key
  required: false
  type: 4
- additionalinfo: The time in seconds till a timeout exception is reached. You can
    specify just the read timeout (for example 60) or also the connect timeout followed
    after a comma (for example 60,10). If a connect timeout is not specified, a default
    of 10 seconds will be used. You may also override the value at the aws-lambda-invoke
    command.
  defaultvalue: 60,10
  display: Timeout
  name: timeout
  required: false
  type: 0
- additionalinfo: 'The maximum number of retry attempts when connection or throttling
    errors are encountered. Set to 0 to disable retries. The default value is 5 and
    the limit is 10. Note: Increasing the number of retries will increase the execution
    time. You may also override the value when executing the aws-lambda-invoke command.'
  defaultvalue: "5"
  display: Retries
  name: retries
  required: false
  type: 0
- display: PrivateLink service URL.
  name: endpoint_url
  required: false
  type: 0
- display: STS PrivateLink URL
  name: sts_endpoint_url
  required: false
  type: 0
- additionalinfo: Sets the AWS_STS_REGIONAL_ENDPOINTS environment variable to specify
    the AWS STS endpoint resolution logic. By default, this option is set to “legacy”
    in AWS. Leave empty if the environment variable is already set using server configuration.
  display: AWS STS Regional Endpoints
  name: sts_regional_endpoint
  options:
  - legacy
  - regional
  required: false
  section: Connect
  type: 15
- defaultvalue: "false"
  display: Trust any certificate (not secure)
  name: insecure
  required: false
  type: 8
- defaultvalue: "false"
  display: Use system proxy settings
  name: proxy
  required: false
  type: 8
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: 6.8.0
    itemVersion: 1.3.6
    packID: AWS-Lambda
    packName: AWS - Lambda
    packPropagationLabels:
    - all
    prevname: ""
    propagationLabels: []
    toServerVersion: ""
description: Amazon Web Services Serverless Compute service (lambda).
detaileddescription: "Before you can use the AWS Lambda integration in Cortex XSOAR,
  you need to perform several configuration steps in your AWS environment.\n\n###
  Prerequisites\n\n- Attach an instance profile with the required permissions to the
  Cortex XSOAR server or engine that is running \non your AWS environment.\n- Instance
  profile requires minimum permission: sts:AssumeRole.\n- Instance profile requires
  permission to assume the roles needed by the AWS integrations.\n\n### Configure
  AWS Settings\n\n1. Create an IAM Role for the Instance Profile.\n2. Attach a Role
  to the Instance Profile.\n3. Configure the Necessary IAM Roles that the AWS Integration
  Can Assume.\n\nFor detailed instructions, [see the AWS Integrations - Authentication](https://xsoar.pan.dev/docs/reference/articles/aws-integrations---authentication).\n\n\n---\n[View
  Integration Documentation](https://xsoar.pan.dev/docs/reference/integrations/aws---lambda)"
display: AWS - Lambda
image: data:image/png;base64,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
name: AWS - Lambda
script:
  commands:
  - arguments:
    - description: The name of the Lambda function.
      name: functionName
      required: true
    - description: Specify a version or alias to get details about a published version
        of the function.
      name: qualifier
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    description: Returns the configuration information of the Lambda function and
      a presigned URL link to the .zip file you uploaded with CreateFunction so you
      can download the .zip file. Note that the URL is valid for up to 10 minutes.
      The configuration information is the same information you provided as parameters
      when uploading the function.  Use the Qualifier parameter to retrieve a published
      version of the function. Otherwise, returns the unpublished version ($LATEST
      ).
    name: aws-lambda-get-function
    outputs:
    - contextPath: AWS.Lambda.Functions.Configuration.FunctionName
      description: The name of the function.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.FunctionArn
      description: The function's Amazon Resource Name.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Runtime
      description: The runtime environment for the Lambda function.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Role
      description: The function's execution role.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Handler
      description: The function Lambda calls to begin executing your function.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.CodeSize
      description: The size of the function's deployment package in bytes.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Description
      description: The function's description.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Timeout
      description: The amount of time that Lambda allows a function to run before
        terminating it.
      type: number
    - contextPath: AWS.Lambda.Functions.Configuration.MemorySize
      description: The memory allocated to the function.
      type: number
    - contextPath: AWS.Lambda.Functions.Configuration.LastModified
      description: The date and time that the function was last updated, in ISO-8601
        format (YYYY-MM-DDThh:mm:ss.sTZD).
      type: date
    - contextPath: AWS.Lambda.Functions.Configuration.CodeSha256
      description: The SHA256 hash of the function's deployment package.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Version
      description: The version of the Lambda function.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.VpcConfig.SubnetIds
      description: A list of VPC subnet IDs.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.VpcConfig.SecurityGroupIds
      description: A list of VPC security groups IDs.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.VpcConfig.VpcId
      description: The ID of the VPC.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.DeadLetterConfig.TargetArn
      description: The Amazon Resource Name (ARN) of an Amazon SQS queue or Amazon
        SNS topic.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Environment.Variables
      description: Environment variable key-value pairs.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Environment.Error.ErrorCode
      description: The error code for environment variables that could not be applied.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Environment.Error.Message
      description: The error message for environment variables that could not be applied.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.KMSKeyArn
      description: The KMS key used to encrypt the function's environment variables.
        Only returned if you've configured a customer managed CMK.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.TracingConfig.Mode
      description: The function's AWS X-Ray tracing configuration mode.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.MasterArn
      description: The ARN of the master function.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.RevisionId
      description: The latest updated revision of the function or alias.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Layers.Arn
      description: The Amazon Resource Name (ARN) of the function layer.
      type: string
    - contextPath: AWS.Lambda.Functions.Configuration.Layers.CodeSize
      description: The size of the layer archive in bytes.
      type: number
    - contextPath: AWS.Lambda.Functions.Code.RepositoryType
      description: The repository from which you can download the function.
      type: string
    - contextPath: AWS.Lambda.Functions.Code.Location
      description: The presigned URL you can use to download the function's .zip file
        that you previously uploaded. The URL is valid for up to 10 minutes.
      type: string
    - contextPath: AWS.Lambda.Functions.Tags
      description: The list of tags associated with the function.
      type: string
    - contextPath: AWS.Lambda.Functions.Concurrency.ReservedConcurrentExecutions
      description: The number of concurrent executions reserved for this function.
      type: string
  - arguments:
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    description: Returns a list of your Lambda functions. For each function, the response
      includes the function configuration information. You must use GetFunction to
      retrieve the code for your function.
    name: aws-lambda-list-functions
    outputs:
    - contextPath: AWS.Lambda.Functions.FunctionName
      description: The name of the function.
      type: string
    - contextPath: AWS.Lambda.Functions.FunctionArn
      description: The function's Amazon Resource Name.
      type: string
    - contextPath: AWS.Lambda.Functions.Runtime
      description: The runtime environment for the Lambda function.
      type: string
    - contextPath: AWS.Lambda.Functions.Role
      description: The function's execution role.
      type: string
    - contextPath: AWS.Lambda.Functions.Handler
      description: The function Lambda calls to begin executing your function.
      type: string
    - contextPath: AWS.Lambda.Functions.CodeSize
      description: The size of the function's deployment package in bytes.
      type: number
    - contextPath: AWS.Lambda.Functions.Description
      description: The function's description.
      type: string
    - contextPath: AWS.Lambda.Functions.Timeout
      description: The amount of time that Lambda allows a function to run before
        terminating it.
      type: number
    - contextPath: AWS.Lambda.Functions.MemorySize
      description: The memory allocated to the function.
      type: number
    - contextPath: AWS.Lambda.Functions.LastModified
      description: The date and time that the function was last updated, in ISO-8601
        format (YYYY-MM-DDThh:mm:ss.sTZD).
      type: date
    - contextPath: AWS.Lambda.Functions.CodeSha256
      description: The SHA256 hash of the function's deployment package.
      type: string
    - contextPath: AWS.Lambda.Functions.Version
      description: The version of the Lambda function.
      type: string
    - contextPath: AWS.Lambda.Functions.VpcConfig.SubnetIds
      description: A list of VPC subnet IDs.
      type: string
    - contextPath: AWS.Lambda.Functions.VpcConfig.SecurityGroupIds
      description: A list of VPC security groups IDs.
      type: string
    - contextPath: AWS.Lambda.Functions.VpcConfig.VpcId
      description: The ID of the VPC.
      type: string
    - contextPath: AWS.Lambda.Functions.DeadLetterConfig.TargetArn
      description: The Amazon Resource Name (ARN) of an Amazon SQS queue or Amazon
        SNS topic.
      type: string
    - contextPath: AWS.Lambda.Functions.Environment.Variables
      description: Environment variable key-value pairs.
      type: string
    - contextPath: AWS.Lambda.Functions.Environment.Error.ErrorCode
      description: The error code for environment variables that could not be applied.
      type: string
    - contextPath: AWS.Lambda.Functions.Environment.Error.Message
      description: The error message for environment variables that could not be applied.
      type: string
    - contextPath: AWS.Lambda.Functions.KMSKeyArn
      description: The KMS key used to encrypt the function's environment variables.
        Only returned if you've configured a customer managed CMK.
      type: string
    - contextPath: AWS.Lambda.Functions.TracingConfig.Mode
      description: The function's AWS X-Ray tracing configuration mode.
      type: string
    - contextPath: AWS.Lambda.Functions.MasterArn
      description: The ARN of the master function.
      type: string
    - contextPath: AWS.Lambda.Functions.RevisionId
      description: Represents the latest updated revision of the function or alias.
      type: string
    - contextPath: AWS.Lambda.Functions.Layers.Arn
      description: The Amazon Resource Name (ARN) of the function layer.
      type: string
    - contextPath: AWS.Lambda.Functions.Layers.CodeSize
      description: The size of the layer archive in bytes.
      type: string
  - arguments:
    - description: The name of the Lambda function.
      name: functionName
      required: true
    - description: If you specify this optional parameter, the API returns only the
        aliases that are pointing to the specific Lambda function version, otherwise
        the API returns all of the aliases created for the Lambda function.
      name: functionVersion
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    description: Returns a list of aliases created for a Lambda function. For each
      alias, the response includes information such as the alias ARN, description,
      alias name, and the function version to which it points.
    name: aws-lambda-list-aliases
    outputs:
    - contextPath: AWS.Lambda.Aliases.AliasArn
      description: Lambda function ARN that is qualified using the alias name as the
        suffix.
      type: string
    - contextPath: AWS.Lambda.Aliases.Name
      description: Alias name.
      type: string
    - contextPath: AWS.Lambda.Aliases.FunctionVersion
      description: Function version to which the alias points.
      type: string
    - contextPath: AWS.Lambda.Aliases.Description
      description: Alias description.
      type: string
    - contextPath: AWS.Lambda.Aliases.RoutingConfig.AdditionalVersionWeights
      description: The name of the second alias, and the percentage of traffic that
        is routed to it.
      type: string
    - contextPath: AWS.Lambda.Aliases.RevisionId
      description: Represents the latest updated revision of the function or alias.
      type: string
  - arguments:
    - description: The name of the Lambda function.
      name: functionName
      required: true
    - auto: PREDEFINED
      description: Choose from the following options.  RequestResponse (default) -
        Invoke the function synchronously. Keep the connection open until the function
        returns a response or times out. Event - Invoke the function asynchronously.
        Send events that fail multiple times to the function's dead-letter queue (if
        configured). DryRun - Validate parameter values and verify that the user or
        role has permission to invoke the function.
      name: invocationType
      predefined:
      - Event
      - RequestResponse
      - DryRun
    - auto: PREDEFINED
      description: You can set this optional parameter to Tail in the request only
        if you specify the InvocationType parameter with value RequestResponse . In
        this case, AWS Lambda returns the base64-encoded last 4 KB of log data produced
        by your Lambda function in the x-amz-log-result header.
      name: logType
      predefined:
      - None
      - Tail
    - description: Using the ClientContext you can pass client-specific information
        to the Lambda function you are invoking.
      name: clientContext
    - description: JSON that you want to provide to your Lambda function as input.
      name: payload
    - description: Specify a version or alias to invoke a published version of the
        function.
      name: qualifier
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    - description: The maximum retry attempts when connection or throttling errors
        are encountered. Set to 0 to disable retries. If not specified, will use the
        instances configured default timeout.
      name: retries
    - description: The time in seconds till a timeout exception is reached. You can
        specify just the read timeout (for example 60) or also the connect timeout
        followed after a comma (for example 60,10). If not specified, will use the
        instances configured default timeout.
      name: timeout
    description: Invokes a Lambda function. Specify just a function name to invoke
      the latest version of the function. To invoke a published version, use the Qualifier
      parameter to specify a version or alias.  If you use the RequestResponse (synchronous)
      invocation option, note that the function may be invoked multiple times if a
      timeout is reached. For functions with a long timeout, your client may be disconnected
      during synchronous invocation while it waits for a response. Use the "timeout"
      and "retries" arguments to control this behavior. If you use the Event (asynchronous)
      invocation option, the function will be invoked at least once in response to
      an event and the function must be idempotent to handle this.
    execution: true
    name: aws-lambda-invoke
    outputs:
    - contextPath: AWS.Lambda.InvokedFunctions.FunctionName
      description: The name of the Lambda function.
      type: string
    - contextPath: AWS.Lambda.InvokedFunctions.FunctionError
      description: Indicates whether an error occurred while executing the Lambda
        function. If an error occurred this field will have one of two values; Handled
        or Unhandled. Handled errors are errors that are reported by the function
        while the Unhandled errors are those detected and reported by AWS Lambda.
        Unhandled errors include out of memory errors and function timeouts.
      type: string
    - contextPath: AWS.Lambda.InvokedFunctions.LogResult
      description: Logs for the Lambda function invocation. This is present only if
        the invocation type is RequestResponse and the logs were requested.
      type: string
    - contextPath: AWS.Lambda.InvokedFunctions.Payload
      description: The JSON representation of the object returned by the Lambda function.
        This is present only if the invocation type is RequestResponse.
      type: string
    - contextPath: AWS.Lambda.InvokedFunctions.ExecutedVersion
      description: The function version that has been executed. This value is returned
        only if the invocation type is RequestResponse.
      type: string
    - contextPath: AWS.Lambda.InvokedFunctions.Region
      description: The AWS Region.
      type: string
    - contextPath: AWS.Lambda.InvokedFunctions.RequestPayload
      description: The JSON representation of the object passed to the Lambda function
        as input.
      type: unknown
  - arguments:
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    description: Retrieves details about your account's limits and usage in an AWS
      Region.
    name: aws-lambda-get-account-settings
    outputs:
    - contextPath: AWS.Lambda.AccountLimit.TotalCodeSize
      description: The amount of storage space that you can use for all deployment
        packages and layer archives.
      type: number
    - contextPath: AWS.Lambda.AccountLimit.CodeSizeUnzipped
      description: The maximum size of your function's code and layers when they're
        extracted.
      type: number
    - contextPath: AWS.Lambda.AccountLimit.CodeSizeZipped
      description: The maximum size of a deployment package when it's uploaded directly
        to AWS Lambda. Use Amazon S3 for larger files.
      type: number
    - contextPath: AWS.Lambda.AccountLimit.ConcurrentExecutions
      description: The maximum number of simultaneous function executions.
      type: number
    - contextPath: AWS.Lambda.AccountLimit.UnreservedConcurrentExecutions
      description: The maximum number of simultaneous function executions, minus the
        capacity that's reserved for individual functions with PutFunctionConcurrency.
      type: number
    - contextPath: AWS.Lambda.AccountUsage.TotalCodeSize
      description: The amount of storage space, in bytes, that's being used by deployment
        packages and layer archives.
      type: number
    - contextPath: AWS.Lambda.AccountUsage. FunctionCount
      description: The number of Lambda functions.
      type: number
  - arguments:
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    - description: The name of the Lambda function, version, or alias. Can be either
        the function name, ARN or partial ARN. You can append a version number or
        alias to any of the formats. The length constraint applies only to the full
        ARN. If you specify only the function name, it is limited to 64 characters
        in length.
      name: functionName
      required: true
    description: Returns the resource-based IAM policy for a function, version, or
      alias.
    name: aws-lambda-get-policy
    outputs:
    - contextPath: AWS.Lambda.Policy.Version
      description: The version of the policy.
      type: String
    - contextPath: AWS.Lambda.Policy.Id
      description: The ID of the policy.
      type: String
    - contextPath: AWS.Lambda.Policy.Statement.Sid
      description: The statement ID within the policy.
      type: String
    - contextPath: AWS.Lambda.Policy.Statement.Effect
      description: The effect (allow/deny) specified in the policy statement.
      type: String
    - contextPath: AWS.Lambda.Policy.Statement.Principal.AWS
      description: The AWS principal ARN specified in the AWS Lambda policy statement.
      type: String
    - contextPath: AWS.Lambda.Policy.Statement.Action
      description: The action specified in the AWS Lambda policy statement.
      type: String
    - contextPath: AWS.Lambda.Policy.Statement.Resource
      description: The resource ARN specified in the AWS Lambda policy statement.
      type: String
    - contextPath: AWS.Lambda.RevisionId
      description: A unique identifier for the current revision of the policy.
      type: String
  - arguments:
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    - description: The name of the Lambda function, version, or alias. Can be either
        the function name, ARN or partial ARN. You can append a version number or
        alias to any of the formats. The length constraint applies only to the full
        ARN. If you specify only the function name, it is limited to 64 characters
        in length.
      name: functionName
      required: true
    - description: Specify the pagination token that’s returned by a previous request
        to retrieve the next page of results.
      name: Marker
    - description: The maximum number of versions to return. Note that ListVersionsByFunction
        returns a maximum of 50 items in each response, even if you set the number
        higher.
      name: MaxItems
    description: Returns a list of versions, with the version-specific configuration
      of each.
    name: aws-lambda-list-versions-by-function
    outputs:
    - contextPath: AWS.Lambda.NextMarker
      description: The pagination token that's included if more results are available.
      type: String
    - contextPath: AWS.Lambda.Versions.FunctionName
      description: The name of the function.
      type: String
    - contextPath: AWS.Lambda.Versions.FunctionArn
      description: The function’s Amazon Resource Name (ARN).
      type: String
    - contextPath: AWS.Lambda.Versions.Runtime
      description: The identifier of the function’s runtime. Runtime is required if
        the deployment package is a .zip file archive.
      type: String
    - contextPath: AWS.Lambda.Versions.Role
      description: The function’s execution role.
      type: String
    - contextPath: AWS.Lambda.Versions.Handler
      description: The function that Lambda calls to begin running your function.
      type: String
    - contextPath: AWS.Lambda.Versions.CodeSize
      description: The size of the function’s deployment package, in bytes.
      type: Number
    - contextPath: AWS.Lambda.Versions.Description
      description: The function’s description.
      type: String
    - contextPath: AWS.Lambda.Versions.Timeout
      description: The amount of time in seconds that Lambda allows a function to
        run before stopping it.
      type: Number
    - contextPath: AWS.Lambda.Versions.MemorySize
      description: The amount of memory available to the function at runtime.
      type: Number
    - contextPath: AWS.Lambda.Versions.LastModified
      description: The date and time that the function was last updated, in ISO-8601
        format (YYYY-MM-DDThh:mm:ss.sTZD).
      type: String
    - contextPath: AWS.Lambda.Versions.CodeSha256
      description: The SHA256 hash of the function’s deployment package.
      type: String
    - contextPath: AWS.Lambda.Versions.Version
      description: The version of the Lambda function.
      type: String
    - contextPath: AWS.Lambda.Versions.VpcConfig.SubnetIds
      description: A list of VPC subnet IDs.
      type: String
    - contextPath: AWS.Lambda.Versions.VpcConfig.SecurityGroupIds
      description: A list of VPC security group IDs.
      type: String
    - contextPath: AWS.Lambda.Versions.VpcConfig.VpcId
      description: The ID of the VPC.
      type: String
    - contextPath: AWS.Lambda.Versions.DeadLetterConfig.TargetArn
      description: The Amazon Resource Name (ARN) of an Amazon SQS queue or Amazon
        SNS topic.
      type: String
    - contextPath: AWS.Lambda.Versions.Environment.Variables.string
      description: Environment variable key-value pairs. Omitted from CloudTrail logs.
      type: String
    - contextPath: AWS.Lambda.Versions.Environment.Error.ErrorCode
      description: The error code for environment variables that couldn't be applied.
      type: String
    - contextPath: AWS.Lambda.Versions.Environment.Error.Message
      description: The error message for environment variables that couldn't be applied.
      type: String
    - contextPath: AWS.Lambda.Versions.KMSKeyArn
      description: The ARN of the KMS key used to encrypt the function's environment
        variables.
      type: String
    - contextPath: AWS.Lambda.Versions.TracingConfig.Mode
      description: The tracing mode for the Lambda function.
      type: String
    - contextPath: AWS.Lambda.Versions.MasterArn
      description: The ARN of the main function for Lambda@Edge functions.
      type: String
    - contextPath: AWS.Lambda.Versions.FunctionVersion
      description: The specific function version.
      type: String
    - contextPath: AWS.Lambda.Versions.Tags
      description: The tags assigned to the Lambda function.
      type: Object
    - contextPath: AWS.Lambda.Versions.State
      description: The current state of the function. When the state is Inactive,
        you can reactivate the function by invoking it.
      type: String
    - contextPath: AWS.Lambda.Versions.StateReason
      description: The reason for the function’s current state.
      type: String
    - contextPath: AWS.Lambda.Versions.StateReasonCode
      description: The reason code for the current state of the function.
      type: String
    - contextPath: AWS.Lambda.Versions.LastUpdateStatus
      description: The status of the last update that was performed on the function.
        This is first set to Successful after function creation completes.
      type: String
    - contextPath: AWS.Lambda.Versions.LastUpdateStatusReason
      description: The reason for the last update that was performed on the function.
      type: String
    - contextPath: AWS.Lambda.Versions.LastUpdateStatusReasonCode
      description: The reason code for the last update operation status.
      type: String
    - contextPath: AWS.Lambda.Versions.PackageType
      description: The type of deployment package. Set to Image for container image
        and set Zip for .zip file archive.
      type: String
    - contextPath: AWS.Lambda.Versions.ImageConfigResponse.ImageConfigError.ErrorCode
      description: The error code for image configuration.
      type: String
    - contextPath: AWS.Lambda.Versions.ImageConfigResponse.ImageConfigError.Message
      description: The error message for image configuration.
      type: String
    - contextPath: AWS.Lambda.Versions.ImageConfigResponse.ImageConfigError.Type
      description: The error type for image configuration.
      type: String
    - contextPath: AWS.Lambda.Versions.ImageConfigResponse.ImageConfig
      description: The image configuration values.
      type: Object
  - arguments:
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    - description: The name of the Lambda function, version, or alias. Can be either
        the function name, ARN or partial ARN. You can append a version number or
        alias to any of the formats. The length constraint applies only to the full
        ARN. If you specify only the function name, it is limited to 64 characters
        in length.
      name: functionName
      required: true
    - description: The alias name.
      name: qualifier
    description: Returns details about a Lambda function URL.
    name: aws-lambda-get-function-url-config
    outputs:
    - contextPath: AWS.Lambda.FunctionURLConfig.FunctionUrl
      description: The HTTP URL endpoint for the function.
      type: String
    - contextPath: AWS.Lambda.FunctionURLConfig.FunctionArn
      description: The Amazon Resource Name (ARN) of your function.
      type: String
    - contextPath: AWS.Lambda.FunctionURLConfig.AuthType
      description: The type of authentication that the function URL uses. Set to AWS_IAM
        if you want to restrict access to authenticated users only. Set to NONE if
        you want to bypass IAM authentication to create a public endpoint.
      type: String
    - contextPath: AWS.Lambda.FunctionURLConfig.Cors.AllowCredentials
      description: Whether to allow cookies or other credentials in requests to the
        function URL. The default is false.
      type: Boolean
    - contextPath: AWS.Lambda.FunctionURLConfig.Cors.AllowHeaders
      description: The HTTP headers that origins can include in requests to the function
        URL. For example Date, Keep-Alive, X-Custom-Header.
      type: List
    - contextPath: AWS.Lambda.FunctionURLConfig.Cors.AllowMethods
      description: The HTTP methods that are allowed when calling the function URL.
        For example GET, POST, DELETE, or the wildcard character ( *).
      type: List
    - contextPath: AWS.Lambda.FunctionURLConfig.Cors.AllowOrigins
      description: The origins that can access the function URL.You can list any number
        of specific origins, separated by a comma. For example https://www.example.com,
        http://localhost:8080. Alternatively, you can grant access to all origins
        using the wildcard character ( *).
      type: List
    - contextPath: AWS.Lambda.FunctionURLConfig.Cors.ExposeHeaders
      description: The HTTP headers in the function response that you want to expose
        to origins that call the function URL. For example Date, Keep-Alive, X-Custom-Header.
      type: List
    - contextPath: AWS.Lambda.FunctionURLConfig.Cors.MaxAge
      description: The maximum amount of time, in seconds, that web browsers can cache
        results of a preflight request. By default, this is set to 0, which means
        that the browser doesn’t cache results.
      type: Number
    - contextPath: AWS.Lambda.FunctionURLConfig.CreationTime
      description: When the function URL was created, in ISO-8601 format (YYYY-MM-DDThh:mm:ss.sTZD).
      type: String
    - contextPath: AWS.Lambda.FunctionURLConfig.LastModifiedTime
      description: When the function URL configuration was last updated, in ISO-8601
        format (YYYY-MM-DDThh:mm:ss.sTZD).
      type: String
    - contextPath: AWS.Lambda.FunctionURLConfig.InvokeMode
      description: 'Use one of the following options: BUFFERED – This is the default
        option. Lambda invokes your function using the Invoke API operation. Invocation
        results are available when the payload is complete. The maximum payload size
        is 6 MB. RESPONSE_STREAM – Your function streams payload results as they become
        available. Lambda invokes your function using the InvokeWithResponseStream
        API operation. The maximum response payload size is 20 MB, however, you can
        request a quota increase.'
      type: String
  - arguments:
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    - description: The name of the Lambda function, version, or alias. Can be either
        the function name, ARN or partial ARN. You can append a version number or
        alias to any of the formats. The length constraint applies only to the full
        ARN. If you specify only the function name, it is limited to 64 characters
        in length.
      name: functionName
      required: true
    - description: Specify a version or alias to get details about a published version
        of the function.
      name: qualifier
    description: Returns the version-specific settings of a Lambda function or version.
      The output includes only options that can vary between versions of a function.
    name: aws-lambda-get-function-configuration
    outputs:
    - contextPath: AWS.Lambda.FunctionConfig.FunctionName
      description: The name of the function.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.FunctionArn
      description: The function’s Amazon Resource Name (ARN).
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Runtime
      description: The identifier of the function’s runtime. Runtime is required if
        the deployment package is a .zip file archive.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Role
      description: The function’s execution role.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Handler
      description: The function that Lambda calls to begin running your function.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.CodeSize
      description: The size of the function’s deployment package, in bytes.
      type: Number
    - contextPath: AWS.Lambda.FunctionConfig.Description
      description: The function’s description.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Timeout
      description: The amount of time in seconds that Lambda allows a function to
        run before stopping it.
      type: Number
    - contextPath: AWS.Lambda.FunctionConfig.MemorySize
      description: The amount of memory available to the function at runtime.
      type: Number
    - contextPath: AWS.Lambda.FunctionConfig.LastModified
      description: The date and time that the function was last updated, in ISO-8601
        format (YYYY-MM-DDThh:mm:ss.sTZD).
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.CodeSha256
      description: The SHA256 hash of the function’s deployment package.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Version
      description: The version of the Lambda function.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.VpcConfig.SubnetIds
      description: A list of VPC subnet IDs.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.VpcConfig.SecurityGroupIds
      description: A list of VPC security group IDs.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.VpcConfig.VpcId
      description: The ID of the VPC.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.DeadLetterConfig.TargetArn
      description: The Amazon Resource Name (ARN) of an Amazon SQS queue or Amazon
        SNS topic.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Environment.Variables.string
      description: Environment variable key-value pairs. Omitted from CloudTrail logs.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Environment.Error.ErrorCode
      description: The error code for environment variables that couldn't be applied.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Environment.Error.Message
      description: The error message for environment variables that couldn't be applied.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.KMSKeyArn
      description: The ARN of the KMS key used to encrypt the function's environment
        variables.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.TracingConfig.Mode
      description: The tracing mode for the Lambda function.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.MasterArn
      description: The ARN of the main function for Lambda@Edge functions.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.FunctionVersion
      description: The specific function version.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.Tags
      description: The tags assigned to the Lambda function.
      type: Object
    - contextPath: AWS.Lambda.FunctionConfig.State
      description: The current state of the function. When the state is Inactive,
        you can reactivate the function by invoking it.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.StateReason
      description: The reason for the function’s current state.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.StateReasonCode
      description: The reason code for the current state of the function.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.LastUpdateStatus
      description: The status of the last update that was performed on the function.
        This is first set to Successful after function creation completes.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.LastUpdateStatusReason
      description: The reason for the last update that was performed on the function.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.LastUpdateStatusReasonCode
      description: The reason code for the last update operation status.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.PackageType
      description: The type of deployment package. Set to Image for container image
        and set Zip for .zip file archive.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.ImageConfigResponse.ImageConfigError.ErrorCode
      description: The error code for image configuration.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.ImageConfigResponse.ImageConfigError.Message
      description: The error message for image configuration.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.ImageConfigResponse.ImageConfigError.Type
      description: The error type for image configuration.
      type: String
    - contextPath: AWS.Lambda.FunctionConfig.ImageConfigResponse.ImageConfig
      description: The image configuration values.
      type: Object
  - arguments:
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    - description: The name of the Lambda function, version, or alias. Can be either
        the function name, ARN or partial ARN. You can append a version number or
        alias to any of the formats. The length constraint applies only to the full
        ARN. If you specify only the function name, it is limited to 64 characters
        in length.
      name: functionName
      required: true
    - description: Specify a version or alias to get details about a published version
        of the function.
      name: qualifier
    description: Deletes a Lambda function URL. When you delete a function URL, you
      can’t recover it. Creating a new function URL results in a different URL address.
    name: aws-lambda-delete-function-url-config
  - arguments:
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    - description: The name of the Lambda function, version, or alias. Can be either
        the function name, ARN or partial ARN. You can append a version number or
        alias to any of the formats. The length constraint applies only to the full
        ARN. If you specify only the function name, it is limited to 64 characters
        in length.
      name: functionName
      required: true
    - description: Specify a version or alias to get details about a published version
        of the function.
      name: qualifier
    description: Deletes a Lambda function. To delete a specific function version,
      use the Qualifier parameter. Otherwise, all versions and aliases are deleted.
    name: aws-lambda-delete-function
  - arguments:
    - description: The name of the Lambda function.
      name: functionName
      predefined:
      - ""
      required: true
    - description: The runtime environment for the function.
      name: runtime
      predefined:
      - ""
      required: true
    - description: 'The name of the method within your code that Lambda calls to execute
        your function. Example: lambda_function.lambda_handler''.'
      name: handler
      predefined:
      - ""
      required: true
    - description: Entry ID of the uploaded base64-encoded contents of the deployment
        package. Amazon Web Services SDK and CLI clients handle the encoding for you.
      name: code
      predefined:
      - ""
    - description: An Amazon S3 bucket in the same Amazon Web Services Region as your
        function. The bucket can be in a different Amazon Web Services account.
      name: S3-bucket
      predefined:
      - ""
    - description: A description of the function.
      name: description
      predefined:
      - ""
    - defaultValue: "3"
      description: The amount of time that Lambda allows a function to run before
        stopping it.
      name: functionTimeout
      predefined:
      - ""
    - defaultValue: "128"
      description: The amount of memory available to the function at runtime.
      name: memorySize
      predefined:
      - ""
    - auto: PREDEFINED
      description: Set to true to publish the first version of the function during
        creation.
      name: publish
      predefined:
      - "True"
      - "False"
    - description: Json string contains SubnetIds - list of VPC subnet IDs, SecurityGroupIds
        - A list of VPC security group IDs,  and boolean Ipv6AllowedForDualStack -
        allows outbound IPv6 traffic.
      name: vpcConfig
      predefined:
      - ""
    - auto: PREDEFINED
      description: The type of deployment package.
      name: packageType
      predefined:
      - Image
      - Zip
    - description: The environment variables for the function. Should be given as
        key-value pairs in a json string.
      name: environment
      predefined:
      - ""
    - defaultValue: Active
      description: The tracing configuration for the function. Set to Active to sample
        and trace a subset of incoming requests with X-Ray.
      name: tracingConfig
      predefined:
      - ""
    - description: The list of tags to apply to the function.
      name: tags
      predefined:
      - ""
    - description: The Amazon Resource Name (ARN) of the function’s execution role.
      name: role
      predefined:
      - ""
      required: true
    - description: A list of function layers to add to the function's execution environment.
      isArray: true
      name: layers
      predefined:
      - ""
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    description: Creates a Lambda function. To create a function, you need a deployment
      package and an execution role.
    name: aws-lambda-create-function
    outputs:
    - contextPath: AWS.Lambda.Functions.FunctionName
      description: The name of the function.
      type: string
    - contextPath: AWS.Lambda.Functions.FunctionArn
      description: The function’s Amazon Resource Name (ARN).
      type: string
    - contextPath: AWS.Lambda.Functions.Runtime
      description: The identifier of the function’s runtime. Runtime is required if
        the deployment package is a .zip file archive.
      type: string
    - contextPath: AWS.Lambda.Functions.Role
      description: The function’s execution role.
      type: string
    - contextPath: AWS.Lambda.Functions.Handler
      description: The function that Lambda calls to begin running your function.
      type: string
    - contextPath: AWS.Lambda.Functions.CodeSize
      description: The size of the function’s deployment package, in bytes.
      type: number
    - contextPath: AWS.Lambda.Functions.Description
      description: The function’s description.
      type: string
    - contextPath: AWS.Lambda.Functions.Timeout
      description: The amount of time in seconds that Lambda allows a function to
        run before stopping it.
      type: number
    - contextPath: AWS.Lambda.Functions.MemorySize
      description: The amount of memory available to the function at runtime.
      type: number
    - contextPath: AWS.Lambda.Functions.Version
      description: The version of the Lambda function.
      type: string
    - contextPath: AWS.Lambda.Functions.VpcConfig.SubnetIds
      description: A list of VPC subnet IDs.
      type: list
    - contextPath: AWS.Lambda.Functions.VpcConfig.SecurityGroupIds
      description: A list of VPC security group IDs.
      type: list
    - contextPath: AWS.Lambda.Functions.VpcConfig.VpcId
      description: The ID of the VPC.
      type: string
    - contextPath: AWS.Lambda.Functions.VpcConfig.Ipv6AllowedForDualStack
      description: Allows outbound IPv6 traffic on VPC functions that are connected
        to dual-stack subnets.
      type: boolean
    - contextPath: AWS.Lambda.Functions.PackageType
      description: The type of deployment package. Set to Image for container image
        and set Zip for .zip file archive.
      type: string
    - contextPath: AWS.Lambda.Functions.LastModified
      description: The date and time that the function was last updated, in ISO-8601
        format (YYYY-MM-DDThh:mm:ss.sTZD).
      type: string
  - arguments:
    - description: The name or Amazon Resource Name (ARN) of the layer.
      name: layer-name
      predefined:
      - ""
      required: true
    - description: The description of the version.
      name: description
      predefined:
      - ""
    - description: The Amazon S3 bucket of the layer archive.
      name: s3-bucket
      predefined:
      - ""
    - description: The Amazon S3 key of the layer archive.
      name: s3-key
      predefined:
      - ""
    - description: For versioned objects, the version of the layer archive object
        to use.
      name: s3-object-version
      predefined:
      - ""
    - description: Entry ID of the base64-encoded contents of the layer archive.
      name: zip-file
      predefined:
      - ""
    - description: ' The name of the method within your code that Lambda calls to
        execute your function.'
      isArray: true
      name: compatible-runtimes
      predefined:
      - ""
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    - auto: PREDEFINED
      description: A list of compatible architectures.
      name: compatible-architectures
      predefined:
      - x86_64
      - arm64
    description: Creates an Lambda layer from a ZIP archive.
    name: aws-lambda-publish-layer-version
    outputs:
    - contextPath: AWS.Lambda.Layers.LayerVersionArn
      description: The ARN of the layer version.
      type: string
    - contextPath: AWS.Lambda.Layers.LayerArn
      description: The ARN of the layer.
      type: string
    - contextPath: AWS.Lambda.Layers.Description
      description: The description of the version.
      type: string
    - contextPath: AWS.Lambda.Layers.CreatedDate
      description: The date that the layer version was created, in ISO-8601 format
        (YYYY-MM-DDThh:mm:ss.sTZD).
      type: string
    - contextPath: AWS.Lambda.Layers.Version
      description: The version number.
      type: number
    - contextPath: AWS.Lambda.Layers.CompatibleRuntimes
      description: The layer’s compatible runtimes.
      type: list
    - contextPath: AWS.Lambda.Layers.CompatibleArchitectures
      description: The layer’s compatible architectures.
      type: list
  - arguments:
    - description: A runtime identifier. For example, java21.
      name: compatible-runtime
      predefined:
      - ""
    - description: The name or Amazon Resource Name (ARN) of the layer.
      name: layer-name
      predefined:
      - ""
      required: true
    - description: A pagination token returned by a previous call.
      name: token
      predefined:
      - ""
    - description: The maximum number of versions to return.
      name: limit
      predefined:
      - ""
    - description: The compatible instruction set architecture.
      name: compatible-architecture
      predefined:
      - ""
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    description: Lists the versions of an Lambda layer.
    name: aws-lambda-list-layer-version
    outputs:
    - contextPath: AWS.Lambda.LayerVersionsNextToken
      description: A pagination token returned when the response doesn’t contain all
        versions.
      type: string
    - contextPath: AWS.Lambda.Layers.LayerVersionArn
      description: The ARN of the layer version.
      type: string
    - contextPath: AWS.Lambda.Layers.Version
      description: The version number.
      type: number
    - contextPath: AWS.Lambda.Layers.Description
      description: The description of the version.
      type: string
    - contextPath: AWS.Lambda.Layers.CreatedDate
      description: The date that the version was created, in ISO 8601 format. For
        example, 2018-11-27T15:10:45.123+0000.
      type: string
    - contextPath: AWS.Lambda.Layers.CompatibleRuntimes
      description: The layer’s compatible runtimes.
      type: list
    - contextPath: AWS.Lambda.Layers.LicenseInfo
      description: The layer’s open-source license.
      type: string
    - contextPath: AWS.Lambda.Layers.CompatibleArchitectures
      description: A list of compatible instruction set architectures.
      type: list
  - arguments:
    - description: The version number.
      name: version-number
      predefined:
      - ""
      required: true
    - description: The name or Amazon Resource Name (ARN) of the layer.
      name: layer-name
      predefined:
      - ""
      required: true
    - auto: PREDEFINED
      description: The AWS Region. If not specified, the default region will be used.
      name: region
      predefined:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - ca-central-1
      - eu-west-1
      - eu-central-1
      - eu-west-2
      - ap-northeast-1
      - ap-northeast-2
      - ap-southeast-1
      - ap-southeast-2
      - ap-south-1
      - sa-east-1
      - eu-north-1
      - eu-west-3
    - description: The Amazon Resource Name (ARN) of the role to assume.
      name: roleArn
    - description: An identifier for the assumed role session.
      name: roleSessionName
    - description: The duration, in seconds, of the role session. The value can range
        from 900 seconds (15 minutes) up to the maximum session duration setting for
        the role.
      name: roleSessionDuration
    description: Deletes a version of an Lambda layer.
    name: aws-lambda-delete-layer-version
  dockerimage: demisto/boto3py3:1.0.0.100468
  runonce: false
  script: |
    register_module_line('AWS - Lambda', 'start', __line__())
    ### pack version: 1.3.6



    ### GENERATED CODE ###: from AWSApiModule import *
    # This code was inserted in place of an API module.
    register_module_line('AWSApiModule', 'start', __line__(), wrapper=-3)


    import boto3
    from botocore.config import Config


    def validate_params(aws_default_region, aws_role_arn, aws_role_session_name, aws_access_key_id, aws_secret_access_key):
        """
        Validates that the provided parameters are compatible with the appropriate authentication method.
        """
        if not aws_default_region:
            raise DemistoException('You must specify AWS default region.')

        if bool(aws_access_key_id) != bool(aws_secret_access_key):
            raise DemistoException('You must provide Access Key id and Secret key id to configure the instance with '
                                   'credentials.')
        if bool(aws_role_arn) != bool(aws_role_session_name):
            raise DemistoException('Role session name is required when using role ARN.')


    def extract_session_from_secret(secret_key, session_token):
        """
        Extract the session token from the secret_key field.
        """
        if secret_key and '@@@' in secret_key and not session_token:
            return secret_key.split('@@@')[0], secret_key.split('@@@')[1]
        else:
            return secret_key, session_token


    class AWSClient:

        def __init__(self, aws_default_region, aws_role_arn, aws_role_session_name, aws_role_session_duration,
                     aws_role_policy, aws_access_key_id, aws_secret_access_key, verify_certificate, timeout, retries,
                     aws_session_token=None, sts_endpoint_url=None, endpoint_url=None):

            self.sts_endpoint_url = sts_endpoint_url
            self.endpoint_url = endpoint_url
            self.aws_default_region = aws_default_region
            self.aws_role_arn = aws_role_arn
            self.aws_role_session_name = aws_role_session_name
            # handle cases where aws_role_session_duration can be also empty string
            self.aws_role_session_duration = aws_role_session_duration if aws_role_session_duration else None
            self.aws_role_policy = aws_role_policy
            self.aws_access_key_id = aws_access_key_id
            self.aws_secret_access_key, self.aws_session_token = extract_session_from_secret(aws_secret_access_key, aws_session_token)
            self.verify_certificate = verify_certificate

            sts_regional_endpoint = demisto.params().get("sts_regional_endpoint") or None
            if sts_regional_endpoint:
                demisto.debug(f"Sets the environment variable AWS_STS_REGIONAL_ENDPOINTS={sts_regional_endpoint}")
                os.environ["AWS_STS_REGIONAL_ENDPOINTS"] = sts_regional_endpoint.lower()

            proxies = handle_proxy(proxy_param_name='proxy', checkbox_default_value=False)
            (read_timeout, connect_timeout) = AWSClient.get_timeout(timeout)
            if int(retries) > 10:
                retries = 10
            self.config = Config(
                connect_timeout=connect_timeout,
                read_timeout=read_timeout,
                retries=dict(
                    max_attempts=int(retries)
                ),
                proxies=proxies
            )

        def update_config(self):
            command_config = {}
            retries = demisto.getArg('retries')  # Supports retries and timeout parameters on the command execution level
            if retries is not None:
                command_config['retries'] = dict(max_attempts=int(retries))
            timeout = demisto.getArg('timeout')
            if timeout is not None:
                (read_timeout, connect_timeout) = AWSClient.get_timeout(timeout)
                command_config['read_timeout'] = read_timeout
                command_config['connect_timeout'] = connect_timeout
            if retries or timeout:
                demisto.debug('Merging client config settings: {}'.format(command_config))
                self.config = self.config.merge(Config(**command_config))  # type: ignore[arg-type]

        def aws_session(self, service, region=None, role_arn=None, role_session_name=None, role_session_duration=None,
                        role_policy=None):
            kwargs = {}

            self.update_config()

            if role_arn and role_session_name is not None:
                kwargs.update({
                    'RoleArn': role_arn,
                    'RoleSessionName': role_session_name,
                })
            elif self.aws_role_arn and self.aws_role_session_name is not None:
                kwargs.update({
                    'RoleArn': self.aws_role_arn,
                    'RoleSessionName': self.aws_role_session_name,
                })

            if role_session_duration is not None:
                kwargs.update({'DurationSeconds': int(role_session_duration)})
            elif self.aws_role_session_duration is not None:
                kwargs.update({'DurationSeconds': int(self.aws_role_session_duration)})

            if role_policy is not None:
                kwargs.update({'Policy': role_policy})
            elif self.aws_role_policy is not None:
                kwargs.update({'Policy': self.aws_role_policy})

            demisto.debug('{kwargs}='.format(kwargs=kwargs))

            if kwargs and not self.aws_access_key_id:  # login with Role ARN
                if not self.aws_access_key_id:
                    sts_client = boto3.client('sts', config=self.config, verify=self.verify_certificate,
                                              region_name=region if region else self.aws_default_region,
                                              endpoint_url=self.sts_endpoint_url)
                    sts_response = sts_client.assume_role(**kwargs)
                    client = boto3.client(
                        service_name=service,
                        region_name=region if region else self.aws_default_region,
                        aws_access_key_id=sts_response['Credentials']['AccessKeyId'],
                        aws_secret_access_key=sts_response['Credentials']['SecretAccessKey'],
                        aws_session_token=sts_response['Credentials']['SessionToken'],
                        verify=self.verify_certificate,
                        config=self.config,
                        endpoint_url=self.endpoint_url
                    )
            elif self.aws_access_key_id and (role_arn or self.aws_role_arn):  # login with Access Key ID and Role ARN
                sts_client = boto3.client(
                    service_name='sts',
                    aws_access_key_id=self.aws_access_key_id,
                    aws_secret_access_key=self.aws_secret_access_key,
                    verify=self.verify_certificate,
                    config=self.config,
                    endpoint_url=self.sts_endpoint_url
                )
                kwargs.update({
                    'RoleArn': role_arn or self.aws_role_arn,
                    'RoleSessionName': role_session_name or self.aws_role_session_name,
                })
                sts_response = sts_client.assume_role(**kwargs)
                client = boto3.client(
                    service_name=service,
                    region_name=region if region else self.aws_default_region,
                    aws_access_key_id=sts_response['Credentials']['AccessKeyId'],
                    aws_secret_access_key=sts_response['Credentials']['SecretAccessKey'],
                    aws_session_token=sts_response['Credentials']['SessionToken'],
                    verify=self.verify_certificate,
                    config=self.config,
                    endpoint_url=self.endpoint_url
                )
            elif self.aws_session_token and not self.aws_role_arn:  # login with session token
                client = boto3.client(
                    service_name=service,
                    region_name=region if region else self.aws_default_region,
                    aws_access_key_id=self.aws_access_key_id,
                    aws_secret_access_key=self.aws_secret_access_key,
                    aws_session_token=self.aws_session_token,
                    verify=self.verify_certificate,
                    config=self.config,
                    endpoint_url=self.endpoint_url
                )
            elif self.aws_access_key_id and not self.aws_role_arn:  # login with access key id
                client = boto3.client(
                    service_name=service,
                    region_name=region if region else self.aws_default_region,
                    aws_access_key_id=self.aws_access_key_id,
                    aws_secret_access_key=self.aws_secret_access_key,
                    verify=self.verify_certificate,
                    config=self.config,
                    endpoint_url=self.endpoint_url
                )
            else:  # login with default permissions, permissions pulled from the ec2 metadata
                client = boto3.client(service_name=service,
                                      region_name=region if region else self.aws_default_region,
                                      endpoint_url=self.endpoint_url)

            return client

        @staticmethod
        def get_timeout(timeout):
            if not timeout:
                timeout = "60,10"  # default values
            try:

                if isinstance(timeout, int):
                    read_timeout = timeout
                    connect_timeout = 10

                else:
                    timeout_vals = timeout.split(',')
                    read_timeout = int(timeout_vals[0])
                    # the default connect timeout is 10
                    connect_timeout = 10 if len(timeout_vals) == 1 else int(timeout_vals[1])

            except ValueError:
                raise DemistoException("You can specify just the read timeout (for example 60) or also the connect "
                                       "timeout followed after a comma (for example 60,10). If a connect timeout is not "
                                       "specified, a default of 10 second will be used.")
            return read_timeout, connect_timeout

    register_module_line('AWSApiModule', 'end', __line__(), wrapper=1)
    ### END GENERATED CODE ###

    """IMPORTS"""
    from datetime import date
    import urllib3.util
    # Disable insecure warnings
    urllib3.disable_warnings()


    def config_aws_session(args: dict[str, str], aws_client: AWSClient):
        """
        Configures an AWS session for the Lambda service,
        Used in all the commands.

        Args:
            args (dict): A dictionary containing the configuration parameters for the session.
                         - 'region' (str): The AWS region.
                         - 'roleArn' (str): The ARN of the IAM role.
                         - 'roleSessionName' (str): The name of the role session.
                         - 'roleSessionDuration' (str): The duration of the role session.

            aws_client (AWSClient): The AWS client used to configure the session.

        Returns:
            AWS session (boto3 client): The configured AWS session.
        """
        return aws_client.aws_session(
            service='lambda',
            region=args.get('region'),
            role_arn=args.get('roleArn'),
            role_session_name=args.get('roleSessionName'),
            role_session_duration=args.get('roleSessionDuration'),
        )


    def _parse_policy_response(data: dict[str, Any]) -> tuple[dict, list | None]:
        """
        Parses the response data representing a policy into a structured format.

        Args:
            data (dict): The response data containing the policy information.

        Returns:
            tuple[dict[str, Any], list[dict[str, str | None]]]: A tuple containing the parsed policy information.
                The first element of the tuple is a dictionary representing the policy metadata with the following keys:
                    - "Id" (str): The ID of the policy.
                    - "Version" (str): The version of the policy.
                    - "RevisionId" (str): The revision ID of the policy.
                The second element of the tuple is a list of dictionaries representing the policy statements.
                Each dictionary in the list represents a statement with the following keys:
                    - "Sid" (str): The ID of the statement.
                    - "Effect" (str): The effect of the statement (e.g., "Allow" or "Deny").
                    - "Action" (str): The action associated with the statement.
                    - "Resource" (str): The resource associated with the statement.
                    - "Principal" (str | None): The principal associated with the statement, if applicable.
        """
        policy: dict[str, Any] = data.get('Policy', {})
        statements: list[dict[str, str | None]] = policy.get('Statement', [])

        if len(statements) == 1:
            return {
                "Sid": statements[0].get('Sid'),
                "Effect": statements[0].get('Effect'),
                "Action": statements[0].get('Action'),
                "Resource": statements[0].get('Resource'),
                "Principal": statements[0].get('Principal'),
            }, None

        else:
            policy_table = {
                "Id": policy.get('Id'),
                "Version": policy.get('Version'),
                "RevisionId": data.get('RevisionId'),
            }
            statements_table = [
                {
                    "Sid": statement.get('Sid'),
                    "Effect": statement.get('Effect'),
                    "Action": statement.get('Action'),
                    "Resource": statement.get('Resource'),
                    "Principal": statement.get('Principal'),
                }
                for statement in statements
            ]

            return policy_table, statements_table


    def parse_tag_field(tags_str):
        tags = []
        regex = re.compile(r'key=([\w\d_:.-]+),value=([ /\w\d@_,.\*-]+)', flags=re.I)
        for f in tags_str.split(';'):
            match = regex.match(f)
            if match is None:
                demisto.debug(f'could not parse field: {f}')
                continue

            tags.append({
                'Key': match.group(1),
                'Value': match.group(2)
            })
        return tags


    class DatetimeEncoder(json.JSONEncoder):
        # pylint: disable=method-hidden
        def default(self, obj):
            if isinstance(obj, datetime):
                return obj.strftime('%Y-%m-%dT%H:%M:%S')
            elif isinstance(obj, date):
                return obj.strftime('%Y-%m-%d')
            # Let the base class default method raise the TypeError
            return json.JSONEncoder.default(self, obj)


    def parse_resource_ids(resource_id: str):
        id_list = resource_id.replace(" ", "")
        return id_list.split(",")


    def create_entry(title: str, data: dict, ec: dict):
        return {
            'ContentsFormat': formats['json'],
            'Type': entryTypes['note'],
            'Contents': data,
            'ReadableContentsFormat': formats['markdown'],
            'HumanReadable': tableToMarkdown(title, data) if data else 'No result were found',
            'EntryContext': ec
        }


    def read_zip_to_bytes(filename):
        """
      Reads the entire zip file into a bytes object in chunks.

      Args:
          filename: Path to the zip file.

      Returns:
          A bytes object containing the complete zip file content.
      """
        with open(filename, "rb") as zip_file:
            data = b''
            for chunk in iter(lambda: zip_file.read(1024), b''):
                data += chunk
        return data


    def prepare_create_function_kwargs(args: dict[str, str]):
        """
        Prepare arguments to be sent to the API
        """
        create_function_api_keys = ['FunctionName', 'Runtime', 'Role', 'Handler', 'Description', 'PackageType']
        kwargs = {}

        if code_path := args.get('code'):
            file_path = demisto.getFilePath(code_path).get('path')
            method_code = read_zip_to_bytes(file_path)
            kwargs.update({'Code': {'ZipFile': method_code}})
        elif s3_bucket := args.get('S3-bucket'):
            kwargs.update({'Code': {'S3Bucket': s3_bucket}})
        else:
            raise DemistoException('code or S3-bucket must be provided.')

        kwargs['TracingConfig'] = {'Mode': args.get('tracingConfig') or "Active"}
        kwargs['MemorySize'] = arg_to_number(args.get('memorySize')) or 128  # type: ignore
        kwargs['Timeout'] = arg_to_number(args.get('functionTimeout')) or 3  # type: ignore

        for key in create_function_api_keys:
            arg_name = key[0].lower() + key[1:]
            if arg_name in args:
                kwargs.update({key: args.get(arg_name)})  # type: ignore

        if publish := args.get('publish'):
            kwargs['Publish'] = argToBoolean(publish)
        if env := args.get('environment'):
            kwargs['Environment'] = {'Variables': {json.loads(env)}}
        if tags := args.get('tags'):
            kwargs['Tags'] = argToBoolean(tags)
        if layers := args.get('layers'):
            kwargs['Layers'] = argToList(layers)
        if vpc := args.get('vpcConfig'):
            kwargs['VpcConfig'] = json.loads(vpc)

        return kwargs


    """MAIN FUNCTIONS"""


    def get_function(args: dict, aws_client):

        obj = vars(aws_client._client_config)
        kwargs = {'FunctionName': args.get('functionName')}
        if args.get('qualifier') is not None:
            kwargs.update({'Qualifier': args.get('qualifier')})

        response = aws_client.get_function(**kwargs)
        func = response['Configuration']
        data = ({
            'FunctionName': func['FunctionName'],
            'FunctionArn': func['FunctionArn'],
            'Runtime': func['Runtime'],
            'Region': obj['_user_provided_options']['region_name'],
        })

        raw = json.loads(json.dumps(response, cls=DatetimeEncoder))
        if raw:
            raw.update({'Region': obj['_user_provided_options']['region_name']})

        ec = {'AWS.Lambda.Functions(val.FunctionArn === obj.FunctionArn)': raw}
        human_readable = tableToMarkdown('AWS Lambda Functions', data)
        return_outputs(human_readable, ec)


    def list_functions(aws_client):

        obj = vars(aws_client._client_config)
        data = []
        output = []

        paginator = aws_client.get_paginator('list_functions')
        for response in paginator.paginate():
            for function in response['Functions']:
                data.append({
                    'FunctionName': function['FunctionName'],
                    'FunctionArn': function['FunctionArn'],
                    'Runtime': function['Runtime'],
                    'LastModified': function['LastModified'],
                    'Region': obj['_user_provided_options']['region_name'],
                })
                output.append(function)

        raw = json.loads(json.dumps(response, cls=DatetimeEncoder))
        if raw:
            raw.update({'Region': obj['_user_provided_options']['region_name']})

        ec = {'AWS.Lambda.Functions(val.FunctionArn === obj.FunctionArn)': raw}
        human_readable = tableToMarkdown('AWS Lambda Functions', data)
        return_outputs(human_readable, ec)


    def list_aliases(args, aws_client):

        data = []
        output = []
        kwargs = {'FunctionName': args.get('functionName')}
        if args.get('functionVersion') is not None:
            kwargs.update({'FunctionVersion': args.get('functionVersion')})

        paginator = aws_client.get_paginator('list_aliases')
        for response in paginator.paginate(**kwargs):
            for alias in response['Aliases']:
                data.append({
                    'AliasArn': alias['AliasArn'],
                    'Name': alias['Name'],
                    'FunctionVersion': alias['FunctionVersion'],
                })
                output.append(alias)
        try:
            raw = json.loads(json.dumps(output, cls=DatetimeEncoder))
        except ValueError as e:
            return_error(f'Could not decode/encode the raw response - {e}')
        ec = {'AWS.Lambda.Aliases(val.AliasArn === obj.AliasArn)': raw}
        human_readable = tableToMarkdown('AWS Lambda Aliases', data)
        return_outputs(human_readable, ec)


    def invoke(args, aws_client):

        obj = vars(aws_client._client_config)
        kwargs = {'FunctionName': args.get('functionName')}
        if args.get('invocationType') is not None:
            kwargs.update({'InvocationType': args.get('invocationType')})
        if args.get('logType') is not None:
            kwargs.update({'LogType': args.get('logType')})
        if args.get('clientContext') is not None:
            kwargs.update({'ClientContext': args.get('clientContext')})
        if args.get('payload') is not None:
            payload = args.get('payload')
            if (not isinstance(payload, str)) or (not payload.startswith('{') and not payload.startswith('[')):
                payload = json.dumps(payload)
            kwargs.update({'Payload': payload})
        if args.get('qualifier') is not None:
            kwargs.update({'Qualifier': args.get('qualifier')})
        response = aws_client.invoke(**kwargs)
        data = ({
            'FunctionName': args.get('functionName'),
            'Region': obj['_user_provided_options']['region_name'],
            'RequestPayload': args.get('payload'),
        })
        if 'LogResult' in response:
            data.update({'LogResult': base64.b64decode(response['LogResult']).decode("utf-8")})  # type:ignore
        if 'Payload' in response:
            data.update({'Payload': response['Payload'].read().decode("utf-8")})  # type:ignore
        if 'ExecutedVersion' in response:
            data.update({'ExecutedVersion': response['ExecutedVersion']})  # type:ignore
        if 'FunctionError' in response:
            data.update({'FunctionError': response['FunctionError']})

        human_readable = tableToMarkdown('AWS Lambda Invoked Functions', data)
        return CommandResults(
            outputs=data,
            readable_output=human_readable,
            outputs_prefix="AWS.Lambda.InvokedFunctions",
            outputs_key_field=["FunctionName", "RequestPayload"]
        )


    def remove_permission(args, aws_client):

        kwargs = {
            'FunctionName': args.get('functionName'),
            'StatementId': args.get('StatementId')
        }
        if args.get('Qualifier') is not None:
            kwargs.update({'Qualifier': args.get('Qualifier')})
        if args.get('RevisionId') is not None:
            kwargs.update({'RevisionId': args.get('RevisionId')})

        response = aws_client.remove_permission(**kwargs)
        if response['ResponseMetadata']['HTTPStatusCode'] == 200:
            demisto.results('Permissions have been removed')


    def get_account_settings(args, aws_client):

        obj = vars(aws_client._client_config)
        response = aws_client.get_account_settings()
        account_limit = response['AccountLimit']
        account_usage = response['AccountUsage']
        data = {
            'AccountLimit': {
                'TotalCodeSize': str(account_limit['TotalCodeSize']),
                'CodeSizeUnzipped': str(account_limit['CodeSizeUnzipped']),
                'CodeSizeZipped': str(account_limit['CodeSizeZipped']),
                'ConcurrentExecutions': str(account_limit['ConcurrentExecutions']),
                'UnreservedConcurrentExecutions': str(account_limit['UnreservedConcurrentExecutions'])
            },
            'AccountUsage': {
                'TotalCodeSize': str(account_usage['TotalCodeSize']),
                'FunctionCount': str(account_usage['FunctionCount'])
            }
        }
        try:
            raw = json.loads(json.dumps(response, cls=DatetimeEncoder))
        except ValueError as e:
            return_error(f'Could not decode/encode the raw response - {e}')
        if raw:
            raw.update({'Region': obj['_user_provided_options']['region_name']})

        ec = {'AWS.Lambda.Functions(val.Region === obj.Region)': raw}
        human_readable = tableToMarkdown('AWS Lambda Functions', data)
        return_outputs(human_readable, ec)


    def get_policy_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Retrieves the policy for a Lambda function from AWS and parses it into a dictionary.

        Args:
            args (dict): A dictionary containing the function name and optional qualifier.
            aws_client: The AWS client(boto3 client) used to retrieve the policy.

        Returns:
            CommandResults: An object containing the parsed policy as outputs, a readable output in Markdown format,
                            and relevant metadata.
        """

        kwargs = {'FunctionName': args['functionName']}
        if qualifier := args.get('qualifier'):
            kwargs['qualifier'] = qualifier

        response = aws_client.get_policy(**kwargs)

        response["Policy"] = json.loads(response["Policy"])
        response.pop("ResponseMetadata", None)

        parsed_policy, parsed_statement = _parse_policy_response(response)

        policy_table = tableToMarkdown(name="Policy", t=parsed_policy)

        if parsed_statement:  # if policy contains a multiple statements, then print the statements in another table
            statements_table = tableToMarkdown("Statements", t=parsed_statement)
            policy_table = policy_table + statements_table

        return CommandResults(
            outputs=response,
            readable_output=policy_table,
            outputs_prefix="AWS.Lambda",
            outputs_key_field='Sid'
        )


    def list_versions_by_function_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Lists the versions of a Lambda function and returns the results as a list of CommandResults objects.

        Args:
            args (dict): A dictionary containing the command arguments.
                         - 'functionName' (str): The name of the Lambda function.
                         - 'Marker' (str, optional): The marker for pagination.
                         - 'MaxItems' (str, optional): The maximum number of items to return.

            aws_client: The AWS client used to list the versions.

        Returns:
            list[CommandResults]: A list of CommandResults objects, containing the parsed versions as outputs,
                                  a readable output in Markdown format, and relevant metadata.
        """
        def parse_version(version: dict[str, Any]) -> dict[str, str | None]:
            return {
                "Function Name": version.get('FunctionName'),
                "Runtime": version.get('Runtime'),
                "Role": version.get('Role'),
                "Description": version.get('Description'),
                "Last Modified": version.get("LastModified"),
                "State": version.get('State'),
            }

        headers = ["Function Name", "Role", "Runtime", "Last Modified", "State", "Description"]

        kwargs = {'FunctionName': args['functionName']}
        for key in ('Marker', 'MaxItems'):
            if (value := args.get(key)) is not None:
                kwargs[key] = value

        response: dict = aws_client.list_versions_by_function(**kwargs)
        response.pop("ResponseMetadata", None)

        parsed_versions = [parse_version(version) for version in response.get('Versions', [])]
        table_for_markdown = tableToMarkdown(name='Versions', t=parsed_versions, headers=headers)

        if next_marker := response.get('NextMarker'):
            table_for_markdown += f"\nTo get the next version run the command with the Marker argument with the value: {next_marker}"

        return CommandResults(
            outputs=response,
            readable_output=table_for_markdown,
            outputs_prefix="AWS.Lambda",
            outputs_key_field='FunctionName'
        )


    def get_function_url_config_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Retrieves the URL configuration of a Lambda function from AWS and returns the results as a CommandResults object.

        Args:
            args (dict): A dictionary containing the command arguments.
                         - 'functionName' (str): The name of the Lambda function.
                         - 'qualifier' (str, optional): The qualifier of the function.

            aws_client (boto3 client): The AWS client used to retrieve the URL configuration.

        Returns:
            CommandResults: An object containing the URL configuration as outputs, a readable output in Markdown format,
                            and relevant metadata.
        """
        def parse_url_config(data: dict[str, Any]) -> dict[str, str | None]:
            return {
                "Function Url": data.get('FunctionUrl'),
                "Function Arn": data.get('FunctionArn'),
                "Auth Type": data.get('AuthType'),
                "Creation Time": data.get('CreationTime'),
                "Last Modified Time": data.get("LastModifiedTime"),
                "Invoke Mode": data.get('InvokeMode'),
            }

        kwargs = {'FunctionName': args['functionName']}
        if qualifier := args.get('qualifier'):
            kwargs['qualifier'] = qualifier

        response = aws_client.get_function_url_config(**kwargs)
        response.pop("ResponseMetadata", None)

        parsed_url_config = parse_url_config(response)

        return CommandResults(
            outputs=response,
            readable_output=tableToMarkdown(name='Function URL Config', t=parsed_url_config),
            outputs_prefix="AWS.Lambda.FunctionURLConfig",
            outputs_key_field='FunctionArn'
        )


    def get_function_configuration_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Retrieves the configuration of a Lambda function from AWS and returns the results as a CommandResults object.

        Args:
            args (dict): A dictionary containing the command arguments.
                         - 'functionName' (str): The name of the Lambda function.
                         - 'qualifier' (str, optional): The qualifier of the function.

            aws_client (boto3 client): The AWS client used to retrieve the function configuration.

        Returns:
            CommandResults: An object containing the function configuration as outputs, a readable output in Markdown format,
                            and relevant metadata.
        """
        def parse_function_configuration(data: dict[str, Any]) -> dict[str, str | None]:
            return {
                "Function Name": data.get('FunctionName'),
                "Function Arn": data.get('FunctionArn'),
                "Description": data.get('Description'),
                "State": data.get('State'),
                "Runtime": data.get("Runtime"),
                "Code Sha256": data.get('CodeSha256'),
                "Revision Id": data.get('RevisionId'),
            }

        kwargs = {'FunctionName': args['functionName']}
        if qualifier := args.get('qualifier'):
            kwargs['qualifier'] = qualifier

        response = aws_client.get_function_configuration(**kwargs)
        response.pop("ResponseMetadata", None)

        parsed_function_configuration = parse_function_configuration(response)

        return CommandResults(
            outputs=response,
            readable_output=tableToMarkdown(name='Function Configuration', t=parsed_function_configuration),
            outputs_prefix="AWS.Lambda.FunctionConfig",
            outputs_key_field='FunctionName'
        )


    def delete_function_url_config_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Deletes the URL configuration for a Lambda function in AWS.

        Args:
            args (dict): A dictionary containing the command arguments.
                         - 'functionName' (str): The name of the Lambda function.
                         - 'qualifier' (str, optional): The qualifier of the function.

            aws_client (boto3 client): The AWS client used to delete the function URL configuration.

        Returns:
            CommandResults: An object containing the result of the deletion operation as a readable output in Markdown format.
        """
        kwargs = {'FunctionName': args['functionName']}
        if qualifier := args.get('qualifier'):
            kwargs['qualifier'] = qualifier

        aws_client.delete_function_url_config(**kwargs)  # raises on error

        return CommandResults(
            readable_output=f"Deleted {args['functionName']} Successfully"
        )


    def delete_function_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Deletes a Lambda function from AWS.

        Args:
            args (dict): A dictionary containing the command arguments.
                         - 'functionName' (str): The name of the Lambda function.
                         - 'qualifier' (str, optional): The qualifier of the function.

            aws_client (boto3 client): The AWS client used to delete the function.

        Returns:
            CommandResults: An object containing the result of the deletion operation as a readable output in Markdown format.
        """
        kwargs = {'FunctionName': args['functionName']}
        if qualifier := args.get('qualifier'):
            kwargs['qualifier'] = qualifier

        aws_client.delete_function(**kwargs)  # raises on error

        return CommandResults(
            readable_output=f"Deleted {args['functionName']} Successfully"
        )


    def create_function_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Creates a Lambda function from AWS.

        Args:
            args (dict): A dictionary containing the command arguments.
            aws_client (boto3 client): The AWS client used to delete the function.

        Returns:
            CommandResults: An object containing the result of the creation operation.
        """
        output_headers = ['FunctionName', 'FunctionArn', 'Runtime', 'Role', 'Handler', 'CodeSize', 'Description', 'Timeout',
                          'MemorySize', 'Version', 'PackageType', 'LastModified', 'VpcConfig', ]

        kwargs = prepare_create_function_kwargs(args)

        res = aws_client.create_function(**kwargs)
        outputs = {key: res.get(key) for key in output_headers}

        readable_outputs = outputs.copy()
        vpc_config = readable_outputs.pop('VpcConfig')
        readable_outputs.update({"SubnetIds": vpc_config.get('SubnetIds'),
                                 "SecurityGroupIds": vpc_config.get('SecurityGroupIds'),
                                 "VpcId": vpc_config.get('VpcId'),
                                 "Ipv6AllowedForDualStack": vpc_config.get('Ipv6AllowedForDualStack')})

        readable_output = tableToMarkdown(name='Create Function',
                                          t=readable_outputs,
                                          headerTransform=pascalToSpace)

        return CommandResults(
            outputs=outputs,
            raw_response=res,
            outputs_prefix='AWS.Lambda.Functions',
            outputs_key_field='FunctionArn',
            readable_output=readable_output
        )


    def publish_layer_version_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Creates an Lambda layer from a ZIP archive.

        Args:
            args (dict): A dictionary containing the command arguments.

            aws_client (boto3 client): The AWS client used to delete the function.

        Returns:
            CommandResults: An object containing the result of the deletion operation as a readable output in Markdown format.
        """
        output_headers = ['LayerVersionArn', 'LayerArn', 'Description', 'CreatedDate', 'Version',
                          'CompatibleRuntimes', 'CompatibleArchitectures']

        content = {}
        s3_bucket = args.get('s3-bucket')
        s3_key = args.get('s3-key')
        s3_object_version = args.get('s3-object-version')

        if zip_file := args.get('zip-file'):
            file_path = demisto.getFilePath(zip_file).get('path')
            content["ZipFile"] = read_zip_to_bytes(file_path)
        elif s3_bucket and s3_key and s3_object_version:
            content['S3Bucket'] = s3_bucket
            content['S3Key'] = s3_key
            content['S3ObjectVersion'] = s3_object_version
        else:
            raise DemistoException("Either zip-file or a combination of s3-bucket, s3-key and s3-object-version must be provided.")

        kwargs = {
            'LayerName': args.get('layer-name'),
            'Description': args.get('description', ""),
            'Content': content,
            'CompatibleRuntimes': argToList(args.get('compatible-runtimes')),
            'CompatibleArchitectures': argToList(args.get('compatible-architectures'))
        }

        res = aws_client.publish_layer_version(**kwargs)
        readable_output = tableToMarkdown(name='Publish Layer Version', t=res, headers=output_headers, headerTransform=pascalToSpace)
        outputs = {key: res.get(key) for key in output_headers}

        return CommandResults(
            outputs=remove_empty_elements(outputs),
            raw_response=res,
            outputs_prefix='AWS.Lambda.Layers',
            outputs_key_field='LayerVersionArn',
            readable_output=readable_output
        )


    def delete_layer_version_command(args: dict[str, str], aws_client) -> CommandResults:
        """
        Deletes a version of a Lambda layer.

        Args:
            args (dict): A dictionary containing the command arguments.
            aws_client (boto3 client): The AWS client used to delete the function.

        Returns:
            CommandResults: An object containing the result of the deletion operation as a readable output in Markdown format.
        """
        layer_name = args.get('layer-name')
        version_number = arg_to_number(args.get('version-number'))
        kwargs = {'LayerName': layer_name,
                  'VersionNumber': version_number}

        aws_client.delete_layer_version(**kwargs)  # raises on error

        return CommandResults(
            readable_output=f"Deleted version number {version_number} of {layer_name} Successfully"
        )


    def list_layer_version_command(args, aws_client):
        """
        Lists the version of an Lambda layer.

        Args:
            args (dict): A dictionary containing the command arguments.
            aws_client (boto3 client): The AWS client used to delete the function.

        Returns:
            CommandResults: An object containing the result of the list operation.
        """

        kwargs = {
            'LayerName': args.get('layer-name'),
            'CompatibleRuntime': args.get('compatible-runtime'),
            'Marker': args.get('token'),
            'MaxItems': arg_to_number(args.get('limit')),
            'CompatibleArchitecture': args.get('compatible-architecture')
        }

        res = aws_client.list_layer_versions(**remove_empty_elements(kwargs))
        outputs = {
            'AWS.Lambda.Layers(val.LayerVersionArn && val.LayerVersionArn == obj.LayerVersionArn)':
                res.get('LayerVersions'),
            'AWS.Lambda(true)': {'LayerVersionsNextToken': res.get("NextMarker")}
        }

        readable_output = tableToMarkdown(name='Layer Version List', t=res.get('LayerVersions'), headerTransform=pascalToSpace)

        return CommandResults(
            outputs=remove_empty_elements(outputs),
            raw_response=res,
            readable_output=readable_output
        )


    """TEST FUNCTION"""


    def test_function(aws_client):
        response = aws_client.list_functions()
        if response['ResponseMetadata']['HTTPStatusCode'] == 200:
            demisto.results('ok')


    def main():

        params = demisto.params()
        command = demisto.command()
        args = demisto.args()
        aws_default_region = params.get('defaultRegion')
        aws_role_arn = params.get('roleArn')
        aws_role_session_name = params.get('roleSessionName')
        aws_role_session_duration = params.get('sessionDuration')
        aws_role_policy = None
        aws_access_key_id = params.get('credentials', {}).get('identifier') or params.get('access_key')
        aws_secret_access_key = params.get('credentials', {}).get('password') or params.get('secret_key')
        verify_certificate = not params.get('insecure', True)
        timeout = params.get('timeout')
        retries = params.get('retries') or 5
        sts_endpoint_url = params.get('sts_endpoint_url') or None
        endpoint_url = params.get('endpoint_url') or None
        validate_params(aws_default_region, aws_role_arn, aws_role_session_name, aws_access_key_id,
                        aws_secret_access_key)
        aws_client = AWSClient(aws_default_region, aws_role_arn, aws_role_session_name, aws_role_session_duration,
                               aws_role_policy, aws_access_key_id, aws_secret_access_key, verify_certificate, timeout,
                               retries, sts_endpoint_url=sts_endpoint_url, endpoint_url=endpoint_url)
        aws_client = config_aws_session(args, aws_client)
        try:
            match command:
                case 'test-module':
                    test_function(aws_client)
                case 'aws-lambda-get-function':
                    get_function(args, aws_client)
                case 'aws-lambda-list-functions':
                    list_functions(aws_client)
                case 'aws-lambda-list-aliases':
                    list_aliases(args, aws_client)
                case 'aws-lambda-invoke':
                    invoke(args, aws_client)
                case 'aws-lambda-remove-permission':
                    remove_permission(args, aws_client)
                case 'aws-lambda-get-account-settings':
                    get_account_settings(args, aws_client)
                case 'aws-lambda-get-policy':
                    return_results(get_policy_command(args, aws_client))
                case 'aws-lambda-list-versions-by-function':
                    return_results(list_versions_by_function_command(args, aws_client))
                case 'aws-lambda-get-function-url-config':
                    return_results(get_function_url_config_command(args, aws_client))
                case 'aws-lambda-get-function-configuration':
                    return_results(get_function_configuration_command(args, aws_client))
                case 'aws-lambda-delete-function-url-config':
                    return_results(delete_function_url_config_command(args, aws_client))
                case 'aws-lambda-delete-function':
                    return_results(delete_function_command(args, aws_client))
                case 'aws-lambda-create-function':
                    return_results(create_function_command(args, aws_client))
                case 'aws-lambda-publish-layer-version':
                    return_results(publish_layer_version_command(args, aws_client))
                case 'aws-lambda-delete-layer-version':
                    return_results(delete_layer_version_command(args, aws_client))
                case 'aws-lambda-list-layer-version':
                    return_results(list_layer_version_command(args, aws_client))
                case _:
                    raise NotImplementedError(f"Command {command} is not implemented")

        except Exception as e:
            return_error(f'Error has occurred in the AWS Lambda Integration: {type(e)}\n {str(e)}')


    # python2 uses __builtin__ python3 uses builtins
    if __name__ in ('__main__', '__builtin__', 'builtins'):
        main()

    register_module_line('AWS - Lambda', 'end', __line__())
  subtype: python3
  type: python
system: true
