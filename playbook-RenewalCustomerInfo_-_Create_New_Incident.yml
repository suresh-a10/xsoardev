contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: ""
    itemVersion: ""
    packID: ""
    packName: ""
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
id: d0b0ffde-c16b-4434-840b-69ad3abb5448
inputs:
- description: ""
  key: CustomerInfo
  playbookInputQuery: null
  required: false
  value: {}
name: RenewalCustomerInfo - Create New Incident
outputs: []
starttaskid: "0"
tasks:
  "0":
    continueonerrortype: ""
    id: "0"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "1"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 7214bbea-064f-411c-8ce0-564e6cf5e76b
      iscommand: false
      name: ""
      version: -1
    taskid: 7214bbea-064f-411c-8ce0-564e6cf5e76b
    timertriggers: []
    type: start
    view: |-
      {
        "position": {
          "x": 450,
          "y": 50
        }
      }
  "1":
    continueonerrortype: ""
    id: "1"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "2"
    note: false
    quietmode: 0
    scriptarguments:
      key:
        simple: RenewalMonth
      value:
        complex:
          accessor: Renewal Date}
          root: ${inputs.CustomerInfo
          transformers:
          - args:
              delimiter:
                value:
                  simple: '-'
            operator: split
          - args:
              index:
                value:
                  simple: "0"
            operator: atIndex
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Set a value in context under the key you entered.
      id: be474117-f9b4-41ce-839c-4a54c25bf826
      iscommand: false
      name: Check the Renewal date and store the month info
      script: Set
      type: regular
      version: -1
    taskid: be474117-f9b4-41ce-839c-4a54c25bf826
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 450,
          "y": 210
        }
      }
  "2":
    continueonerrortype: ""
    id: "2"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "3"
    note: false
    quietmode: 0
    scriptarguments:
      key:
        simple: RenewalQuarter
      value:
        complex:
          accessor: CustomerRenewalQuarters
          root: lists
          transformers:
          - operator: ParseJSON
          - args:
              field:
                iscontext: true
                value:
                  simple: ${RenewalMonth}
            operator: getField
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Set a value in context under the key you entered.
      id: d3b3c43d-20aa-42bd-86d2-5359d772d5e8
      iscommand: false
      name: Get Quarter info if the renewal date is in the current quarter
      script: Set
      type: regular
      version: -1
    taskid: d3b3c43d-20aa-42bd-86d2-5359d772d5e8
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 450,
          "y": 410
        }
      }
  "3":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: ${CurrentQuarter}
          operator: isEqualString
          right:
            iscontext: true
            value:
              simple: ${RenewalQuarter}
      label: RenewalDate is in Current Quarter
    continueonerrortype: ""
    id: "3"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "5"
      RenewalDate is in Current Quarter:
      - "4"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: f0c0c5ee-6c51-4ff6-8211-ae7c9627cd68
      iscommand: false
      name: Validate the if renewal date in current quarter
      type: condition
      version: -1
    taskid: f0c0c5ee-6c51-4ff6-8211-ae7c9627cd68
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 450,
          "y": 610
        }
      }
  "4":
    continueonerrortype: ""
    id: "4"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "7"
    note: false
    quietmode: 0
    scriptarguments:
      accountname:
        simple: ${inputs.CustomerInfo.Account Name}
      adjustedarr:
        simple: ${inputs.CustomerInfo.Adjusted ARR ($)}
      arr:
        simple: ${inputs.CustomerInfo.ARR ($)}
      csa:
        simple: ${inputs.CustomerInfo.CSA}
      cse:
        simple: ${inputs.CustomerInfo.CSE}
      csm:
        simple: ${inputs.CustomerInfo.CSM}
      csofferings:
        simple: ${inputs.CustomerInfo.CS Offering}
      customersince:
        simple: ${inputs.CustomerInfo.Customer Since}
      gsrenewaldate:
        simple: ${inputs.CustomerInfo.GS Renewal Due}
      gsrenewalrep:
        simple: ${inputs.CustomerInfo.GS Renewal Rep}
      multicortexproducts:
        simple: ${inputs.CustomerInfo.Multi Cortex Products (Yes/No)}
      name:
        simple: ${inputs.CustomerInfo.Account Name} - in Renewal Phase - ${inputs.CustomerInfo.Renewal
          Date}
      product:
        simple: ${inputs.CustomerInfo.Product}
      productstatus:
        simple: ${inputs.CustomerInfo.Product Status}
      pstype:
        simple: ${inputs.CustomerInfo.PS Type}
      renewaldate:
        simple: ${inputs.CustomerInfo.Renewal Date}
      renewalrep:
        simple: ${inputs.CustomerInfo.Renewal Rep}
      renewalrepmanager:
        simple: ${inputs.CustomerInfo.Renewal Rep Manager}
      signaturemanagedproduct:
        simple: ${inputs.CustomerInfo.Signature Managed Product}
      type:
        simple: RenewalCustomers
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: commands.local.cmd.create.inc
      id: a991e1ad-56f7-4b06-8f7b-35d755ac1d27
      iscommand: true
      name: Create new incident with High Touch customer info
      script: Builtin|||createNewIncident
      type: regular
      version: -1
    taskid: a991e1ad-56f7-4b06-8f7b-35d755ac1d27
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 100,
          "y": 820
        }
      }
  "5":
    continueonerrortype: ""
    id: "5"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "8"
    note: false
    quietmode: 0
    scriptarguments:
      append:
        simple: "true"
      key:
        simple: CustomerRenewalnotinQuarter
      value:
        simple: ${inputs.CustomerInfo}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Set a value in context under the key you entered.
      id: 886e86ec-05e8-4ea2-8777-8503026468e2
      iscommand: false
      name: ' High Touch customer info -  Renewal Date not in this Quarter'
      script: Set
      type: regular
      version: -1
    taskid: 886e86ec-05e8-4ea2-8777-8503026468e2
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 740,
          "y": 810
        }
      }
  "6":
    continueonerrortype: ""
    id: "6"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    scriptarguments:
      key:
        simple: RenewalMonth,RenewalQuarter
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: |-
        Delete field from context.

        This automation runs using the default Limited User role, unless you explicitly change the permissions.
        For more information, see the section about permissions here:
        https://docs-cortex.paloaltonetworks.com/r/Cortex-XSOAR/6.10/Cortex-XSOAR-Administrator-Guide/Automations
      id: 36525592-baf4-47aa-8af3-569b0187f5fb
      iscommand: false
      name: DeleteContext Key RenewalMonth & RenewalQuarter
      script: DeleteContext
      type: regular
      version: -1
    taskid: 36525592-baf4-47aa-8af3-569b0187f5fb
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 910,
          "y": 1080
        }
      }
  "7":
    continueonerrortype: ""
    id: "7"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "8"
    note: false
    quietmode: 0
    scriptarguments:
      action:
        simple: link
      incidentId:
        complex:
          accessor: id
          root: incident
      linkedIncidentIDs:
        simple: ${CreatedIncidentID}
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: commands.local.cmd.linkIncidents
      id: 67dc176a-7c10-4650-8c11-90a50ba15edf
      iscommand: true
      name: Link the created incident with Current Incident
      script: Builtin|||linkIncidents
      type: regular
      version: -1
    taskid: 67dc176a-7c10-4650-8c11-90a50ba15edf
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 100,
          "y": 1020
        }
      }
  "8":
    continueonerrortype: ""
    id: "8"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 603b4a64-7f21-4479-8aed-6ccd9ae42193
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: 603b4a64-7f21-4479-8aed-6ccd9ae42193
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 430,
          "y": 1320
        }
      }
version: -1
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 1335,
        "width": 1190,
        "x": 100,
        "y": 50
      }
    }
  }
