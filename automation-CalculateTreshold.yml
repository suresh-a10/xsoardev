args:
- name: list
  required: true
commonfields:
  id: 914ac02b-da5c-48fa-880d-103752aeaa92
  version: -1
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: ""
    itemVersion: ""
    packID: ""
    packName: ""
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
dockerimage: demisto/python3:3.7.3.286
enabled: true
engineinfo: {}
mainengineinfo: {}
name: CalculateTreshold
pswd: ""
runas: DBotWeakRole
runonce: false
script: |+
  l=demisto.args().get("list")
  p=json.loads(demisto.executeCommand('getList', {'listName':l})[0]['Contents'])
  r=[]
  values=list(p.values())

  for i in values[-22:-1]:
      r.append(int(i))

  avg=sum(r)/21
  percentage=avg*0.025
  threshold=avg+percentage
  threshold=round(threshold)
  demisto.setContext('Threshold',threshold)
  demisto.results(threshold)

scripttarget: 0
subtype: python3
tags: []
type: python
