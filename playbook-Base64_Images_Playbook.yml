contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: ""
    itemVersion: ""
    packID: ""
    packName: ""
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
description: "Example playbook, this will take images attached (png or jpeg), base64
  encode them to context, create html for those, and send an email with the html body
  containing those images.\n\nIdea being you can insert those images into an email
  body or even an Ask Task.   Each step in the playbook has details explaining what
  it's doing. "
id: a755380a-26f4-48e6-8944-c57d75786393
inputs: []
name: Base64 Images Playbook
outputs: []
starttaskid: "0"
tasks:
  "0":
    continueonerrortype: ""
    id: "0"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "3"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 21d78761-d319-4b21-88e8-b32899e4e3bc
      iscommand: false
      name: ""
      version: -1
    taskid: 21d78761-d319-4b21-88e8-b32899e4e3bc
    timertriggers: []
    type: start
    view: |-
      {
        "position": {
          "x": 50,
          "y": 65
        }
      }
  "3":
    continueonerrortype: ""
    id: "3"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "4"
    note: false
    quietmode: 0
    scriptarguments:
      entryId:
        complex:
          accessor: EntryID
          filters:
          - - left:
                iscontext: true
                value:
                  simple: File.Extension
              operator: inList
              right:
                value:
                  simple: png,jpg,jpeg
          root: File
          transformers:
          - operator: uniq
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: |
        Encode a file as base64 and store it in context
      id: 3dab3e64-b92b-47fa-8fd9-20ef841b8bd9
      iscommand: false
      name: Base64 Encode - png or jpeg
      script: 25b3a0e5-547a-42fe-8932-5f7969dfca15
      type: regular
      version: -1
    taskid: 3dab3e64-b92b-47fa-8fd9-20ef841b8bd9
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 50,
          "y": 225
        }
      }
  "4":
    continueonerrortype: ""
    id: "4"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    scriptarguments:
      images_base64:
        simple: ${Base64Files}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: 'This automation creates image tags from base64 encoded images
        in context.  '
      id: 1012b5e5-9f74-41a2-8f69-d9e97c91af5c
      iscommand: false
      name: Create html links with base64 encoded images
      script: 37a9e1d4-b046-4b79-8ed3-55875c9891cd
      type: regular
      version: -1
    taskid: 1012b5e5-9f74-41a2-8f69-d9e97c91af5c
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 50,
          "y": 400
        }
      }
  "5":
    continueonerrortype: ""
    form:
      description: Where do you want to send this?
      expired: false
      questions:
      - defaultrows: []
        fieldassociated: ""
        gridcolumns: []
        id: "0"
        label: ""
        labelarg:
          simple: Email
        options: []
        optionsarg: []
        placeholder: ""
        readonly: false
        required: true
        tooltip: Email to send to
        type: shortText
      sender: ""
      title: Email Address
      totalanswers: 0
    id: "5"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    message:
      bcc: null
      body:
        simple: Email Address
      cc: null
      format: ""
      methods: []
      subject: null
      timings:
        completeafterreplies: 1
        completeaftersla: false
        completeafterv2: false
        retriescount: 2
        retriesinterval: 360
      to: null
    nexttasks:
      '#none#':
      - "6"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: c19e2411-b60d-4242-89d3-0facf98f9355
      iscommand: false
      name: Ask User for an Email Address
      type: collection
      version: -1
    taskid: c19e2411-b60d-4242-89d3-0facf98f9355
    timertriggers: []
    type: collection
    view: |-
      {
        "position": {
          "x": 480,
          "y": 50
        }
      }
  "6":
    continueonerrortype: ""
    id: "6"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "7"
    note: false
    quietmode: 0
    scriptarguments:
      htmlBody:
        complex:
          root: ImageHTMLLinks
          transformers:
          - operator: uniq
          - args:
              separator:
                value:
                  simple: <br>
            operator: join
          - args:
              prefix:
                value:
                  simple: Here are some cool images base64 encoded!<br><br>
              suffix:
                value:
                  simple: <br>
            operator: concat
      subject:
        simple: Base64 Images from XSOAR
      to:
        simple: ${Email Address.Answers.0}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends an email.
      id: 87f3dcef-7b04-4911-81b1-1c88b2f9e9f4
      iscommand: true
      name: Send Email with Images in HTML Body
      script: '|||send-mail'
      type: regular
      version: -1
    taskid: 87f3dcef-7b04-4911-81b1-1c88b2f9e9f4
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 480,
          "y": 225
        }
      }
  "7":
    continueonerrortype: ""
    id: "7"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    scriptarguments:
      closeNotes:
        simple: Email sent
      closeReason:
        simple: Resolved
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: commands.local.cmd.close.inv
      id: 45f843e7-0490-45c5-81e5-a1178d535ff1
      iscommand: true
      name: 'Fin. '
      script: Builtin|||closeInvestigation
      type: regular
      version: -1
    taskid: 45f843e7-0490-45c5-81e5-a1178d535ff1
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 480,
          "y": 400
        }
      }
version: -1
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 445,
        "width": 810,
        "x": 50,
        "y": 50
      }
    }
  }
